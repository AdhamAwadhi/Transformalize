(function(){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,skipDuplicateAddTesting:!1,animateAddingMarkers:!1},initialize:function(n){L.Util.setOptions(this,n);this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction);L.FeatureGroup.prototype.initialize.call(this,[]);this._inZoomAnimation=0;this._needsClustering=[];this._currentShownBounds=null},addLayer:function(n){var i,t,r;if(n instanceof L.LayerGroup){for(i in n._layers)n._layers.hasOwnProperty(i)&&this.addLayer(n._layers[i]);return this}if(this.options.singleMarkerMode&&(n.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[n]}})),!this._map)return this._needsClustering.push(n),this;if(!this.options.skipDuplicateAddTesting&&this.hasLayer(n))return this;if(this._unspiderfy&&this._unspiderfy(),this._addLayer(n,this._maxZoom),t=n,r=this._map.getZoom(),n.__parent)while(t.__parent._zoom>=r)t=t.__parent;return this.options.animateAddingMarkers?this._animationAddLayer(n,t):this._animationAddLayerNonAnimated(n,t),this},removeLayer:function(n){return n.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(n)),this._removeLayer(n,!0),n._icon&&L.FeatureGroup.prototype.removeLayer.call(this,n),this):this},clearLayers:function(){if(!this._map)return this._needsClustering=[],this;this._unspiderfy&&this._unspiderfy();for(var n in this._layers)this._layers.hasOwnProperty(n)&&L.FeatureGroup.prototype.removeLayer.call(this,this._layers[n]);return this._generateInitialClusters(),this},hasLayer:function(n){var t=!1;return this._topClusterLevel._recursively(new L.LatLngBounds([n.getLatLng()]),0,this._map.getMaxZoom()+1,function(i){for(var r=i._markers.length-1;r>=0&&!t;r--)i._markers[r]===n&&(t=!0)},null),t},zoomToShowLayer:function(n,t){var i=function(){if((n._icon||n.__parent._icon)&&!this._inZoomAnimation)if(this._map.off("moveend",i,this),this.off("animationend",i,this),n._icon)t();else if(n.__parent._icon){var r=function(){this.off("spiderfied",r,this);t()};this.on("spiderfied",r,this);n.__parent.spiderfy()}};if((n._icon||n.__parent._icon)&&this._map.getBounds().contains(n.__parent._latlng))i.call(this);else{this._map.on("moveend",i,this);this.on("animationend",i,this);n.__parent.zoomToBounds()}},onAdd:function(n){L.FeatureGroup.prototype.onAdd.call(this,n);this._gridClusters||this._generateInitialClusters();for(var t=0,i=this._needsClustering.length;t<i;t++)this._addLayer(this._needsClustering[t],this._maxZoom);this._needsClustering=[];this._map.on("zoomend",this._zoomEnd,this);this._map.on("moveend",this._moveEnd,this);this._spiderfierOnAdd&&this._spiderfierOnAdd();this._bindEvents();this._zoom=this._map.getZoom();this._currentShownBounds=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)},onRemove:function(n){this._map.off("zoomend",this._zoomEnd,this);this._map.off("moveend",this._moveEnd,this);this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","");this._spiderfierOnRemove&&this._spiderfierOnRemove();L.FeatureGroup.prototype.onRemove.call(this,n)},_arraySplice:function(n,t){for(var i=n.length-1;i>=0;i--)if(n[i]===t){n.splice(i,1);return}},_removeLayer:function(n,t){var s=this._gridClusters,e=this._gridUnclustered,f=this._map,u,i,o,r;if(t)for(u=this._maxZoom;u>=0;u--)if(!e[u].removeObject(n,f.project(n.getLatLng(),u)))break;for(i=n.__parent,o=i._markers,this._arraySplice(o,n);i;){if(i._childCount--,i._zoom<0)break;else t&&i._childCount<=1?(r=i._markers[0]===n?i._markers[1]:i._markers[0],s[i._zoom].removeObject(i,f.project(i._cLatLng,i._zoom)),e[i._zoom].addObject(r,f.project(r.getLatLng(),i._zoom)),this._arraySplice(i.__parent._childClusters,i),i.__parent._markers.push(r),r.__parent=i.__parent,i._icon&&(L.FeatureGroup.prototype.removeLayer.call(this,i),L.FeatureGroup.prototype.addLayer.call(this,r))):(i._recalculateBounds(),i._updateIcon());i=i.__parent}},_propagateEvent:function(n){n.target instanceof L.MarkerCluster&&(n.type="cluster"+n.type);L.FeatureGroup.prototype._propagateEvent.call(this,n)},_defaultIconCreateFunction:function(n){var t=n.getChildCount(),i=" marker-cluster-";return i+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"<\/span><\/div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var n=null,t=this._map,i=this.options.spiderfyOnMaxZoom,u=this.options.showCoverageOnHover,r=this.options.zoomToBoundsOnClick;if(i||r)this.on("clusterclick",function(n){t.getMaxZoom()===t.getZoom()?i&&n.layer.spiderfy():r&&n.layer.zoomToBounds()},this);if(u){this.on("clustermouseover",function(i){this._inZoomAnimation||(n&&t.removeLayer(n),i.layer.getChildCount()>2&&(n=new L.Polygon(i.layer.getConvexHull()),t.addLayer(n)))},this);this.on("clustermouseout",function(){n&&(t.removeLayer(n),n=null)},this);t.on("zoomend",function(){n&&(t.removeLayer(n),n=null)},this);t.on("layerremove",function(i){n&&i.layer===this&&(t.removeLayer(n),n=null)},this)}},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=this._map._zoom,this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var n=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,n);this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,n);this._currentShownBounds=n;return}},_generateInitialClusters:function(){var t=this._map.getMaxZoom(),i=this.options.maxClusterRadius,n;for(this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={},n=t;n>=0;n--)this._gridClusters[n]=new L.DistanceGrid(i),this._gridUnclustered[n]=new L.DistanceGrid(i);this._topClusterLevel=new L.MarkerCluster(this,-1)},_addLayer:function(n,t){for(var o=this._gridClusters,s=this._gridUnclustered,e,r,i,h,u,f;t>=0;t--){if(e=this._map.project(n.getLatLng(),t),i=o[t].getNearObject(e),i){i._addChild(n);n.__parent=i;return}if(i=s[t].getNearObject(e),i){for(i.__parent&&this._removeLayer(i,!1),h=i.__parent||this._topClusterLevel,u=new L.MarkerCluster(this,t,i,n),o[t].addObject(u,this._map.project(u._cLatLng,t)),i.__parent=u,n.__parent=u,f=u,r=t-1;r>h._zoom;r--)f=new L.MarkerCluster(this,r,f),o[r].addObject(f,this._map.project(i.getLatLng(),r));for(h._addChild(f),r=t;r>=0;r--)if(!s[r].removeObject(i,this._map.project(i.getLatLng(),r)))break;return}s[t].addObject(n,e)}return},_mergeSplitClusters:function(){this._zoom<this._map._zoom?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,this._map._zoom)):this._zoom>this._map._zoom?(this._animationStart(),this._animationZoomOut(this._zoom,this._map._zoom)):this._moveEnd()},_getExpandedVisibleBounds:function(){var t=this._map,n=t.getPixelBounds(),i=L.Browser.mobile?0:Math.abs(n.max.x-n.min.x),r=L.Browser.mobile?0:Math.abs(n.max.y-n.min.y),u=t.unproject(new L.Point(n.min.x-i,n.min.y-r)),f=t.unproject(new L.Point(n.max.x+i,n.max.y+r));return new L.LatLngBounds(u,f)},_animationAddLayerNonAnimated:function(n,t){if(t===n)L.FeatureGroup.prototype.addLayer.call(this,n);else if(t._childCount===2){t._addToMap();var i=t.getAllChildMarkers();L.FeatureGroup.prototype.removeLayer.call(this,i[0]);L.FeatureGroup.prototype.removeLayer.call(this,i[1])}else t._updateIcon()}});L.MarkerClusterGroup.include(L.DomUtil.TRANSITION?{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim";this._inZoomAnimation++},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""));this._inZoomAnimation--;this.fire("animationend")},_animationZoomIn:function(n,t){var i=this,r=this._getExpandedVisibleBounds(),u,e,f;this._topClusterLevel._recursively(r,n,0,function(f){var s=f._latlng,o=f._markers,e;for(f._isSingleParent()&&n+1===t?(L.FeatureGroup.prototype.removeLayer.call(i,f),f._recursivelyAddChildrenToMap(null,t,r)):(f.setOpacity(0),f._recursivelyAddChildrenToMap(s,t,r)),u=o.length-1;u>=0;u--)e=o[u],r.contains(e._latlng)||L.FeatureGroup.prototype.removeLayer.call(i,e)});this._forceLayout();i._topClusterLevel._recursivelyBecomeVisible(r,t);for(e in i._layers)i._layers.hasOwnProperty(e)&&(f=i._layers[e],f instanceof L.MarkerCluster||!f._icon||f.setOpacity(1));i._topClusterLevel._recursively(r,n,t,function(n){n._recursivelyRestoreChildPositions(t)});setTimeout(function(){i._topClusterLevel._recursively(r,n,0,function(n){L.FeatureGroup.prototype.removeLayer.call(i,n)});i._animationEnd()},250)},_animationZoomOut:function(n,t){this._animationZoomOutSingle(this._topClusterLevel,n,t);this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds())},_animationZoomOutSingle:function(n,t,i){var r=this._getExpandedVisibleBounds(),u;n._recursivelyAnimateChildrenInAndAddSelfToMap(r,t,i);u=this;this._forceLayout();n._recursivelyBecomeVisible(r,i);setTimeout(function(){n._recursively(r,i,0,function(n){n._recursivelyRemoveChildrenFromMap(r,t)});u._animationEnd()},250)},_animationAddLayer:function(n,t){var i=this;L.FeatureGroup.prototype.addLayer.call(this,n);t!==n&&(t._childCount>2?(t._updateIcon(),this._forceLayout(),this._animationStart(),n._setPos(this._map.latLngToLayerPoint(t.getLatLng())),n.setOpacity(0),setTimeout(function(){L.FeatureGroup.prototype.removeLayer.call(i,n);n.setOpacity(1);i._animationEnd()},250)):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(t,this._map.getMaxZoom(),this._map.getZoom())))},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}:{_animationStart:function(){},_animationZoomIn:function(n,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,n);this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds())},_animationZoomOut:function(n,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,n);this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds())},_animationAddLayer:function(n,t){this._animationAddLayerNonAnimated(n,t)}});L.MarkerCluster=L.Marker.extend({initialize:function(n,t,i,r){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this});this._group=n;this._zoom=t;this._markers=[];this._childClusters=[];this._childCount=0;this._iconNeedsUpdate=!0;this._bounds=new L.LatLngBounds;i&&this._addChild(i);r&&this._addChild(r)},getAllChildMarkers:function(n){var t,i;for(n=n||[],t=this._childClusters.length-1;t>=0;t--)this._childClusters[t].getAllChildMarkers(n);for(i=this._markers.length-1;i>=0;i--)n.push(this._markers[i]);return n},getChildCount:function(){return this._childCount},zoomToBounds:function(){this._group._map.fitBounds(this._bounds)},_updateIcon:function(){this._iconNeedsUpdate=!0;this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(n,t){this._iconNeedsUpdate=!0;this._expandBounds(n);n instanceof L.MarkerCluster?(t||(this._childClusters.push(n),n.__parent=this),this._childCount+=n._childCount):(t||this._markers.push(n),this._childCount++);this.__parent&&this.__parent._addChild(n,!0)},_expandBounds:function(n){var i,t=n._wLatLng||n._latlng,r;n instanceof L.MarkerCluster?(this._bounds.extend(n._bounds),i=n._childCount):(this._bounds.extend(t),i=1);this._cLatLng||(this._cLatLng=n._cLatLng||t);r=this._childCount+i;this._wLatLng?(this._wLatLng.lat=(t.lat*i+this._wLatLng.lat*this._childCount)/r,this._wLatLng.lng=(t.lng*i+this._wLatLng.lng*this._childCount)/r):this._latlng=this._wLatLng=new L.LatLng(t.lat,t.lng)},_addToMap:function(n){n&&(this._backupLatlng=this._latlng,this.setLatLng(n));L.FeatureGroup.prototype.addLayer.call(this._group,this)},_recursivelyAnimateChildrenIn:function(n,t,i){this._recursively(n,0,i-1,function(n){for(var u=n._markers,r,i=u.length-1;i>=0;i--)r=u[i],r._icon&&(r._setPos(t),r.setOpacity(0))},function(n){for(var u=n._childClusters,r,i=u.length-1;i>=0;i--)r=u[i],r._icon&&(r._setPos(t),r.setOpacity(0))})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(n,t,i){this._recursively(n,i,0,function(r){r._recursivelyAnimateChildrenIn(n,r._group._map.latLngToLayerPoint(r.getLatLng()).round(),t);r._isSingleParent()&&t-1===i?(r.setOpacity(1),r._recursivelyRemoveChildrenFromMap(n,t)):r.setOpacity(0);r._addToMap()})},_recursivelyBecomeVisible:function(n,t){this._recursively(n,0,t,null,function(n){n.setOpacity(1)})},_recursivelyAddChildrenToMap:function(n,t,i){this._recursively(i,0,t,function(r){var f,u;if(t!==r._zoom)for(f=r._markers.length-1;f>=0;f--)(u=r._markers[f],i.contains(u._latlng))&&(n&&(u._backupLatlng=u.getLatLng(),u.setLatLng(n),u.setOpacity(0)),L.FeatureGroup.prototype.addLayer.call(r._group,u))},function(t){t._addToMap(n)})},_recursivelyRestoreChildPositions:function(n){for(var t,r,u,i=this._markers.length-1;i>=0;i--)t=this._markers[i],t._backupLatlng&&(t.setLatLng(t._backupLatlng),delete t._backupLatlng);if(n-1===this._zoom)for(r=this._childClusters.length-1;r>=0;r--)this._childClusters[r]._restorePosition();else for(u=this._childClusters.length-1;u>=0;u--)this._childClusters[u]._recursivelyRestoreChildPositions(n)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(n,t,i){var r,u;this._recursively(n,-1,t-1,function(n){for(u=n._markers.length-1;u>=0;u--)r=n._markers[u],i&&i.contains(r._latlng)||(L.FeatureGroup.prototype.removeLayer.call(n._group,r),r.setOpacity(1))},function(n){for(u=n._childClusters.length-1;u>=0;u--)r=n._childClusters[u],i&&i.contains(r._latlng)||(L.FeatureGroup.prototype.removeLayer.call(n._group,r),r.setOpacity(1))})},_recursively:function(n,t,i,r,u){var o=this._childClusters,s=this._zoom,f,e;if(t>s)for(f=o.length-1;f>=0;f--)e=o[f],n.intersects(e._bounds)&&e._recursively(n,t,i,r,u);else if(r&&r(this),u&&this._zoom===i&&u(this),i>s)for(f=o.length-1;f>=0;f--)e=o[f],n.intersects(e._bounds)&&e._recursively(n,t,i,r,u)},_recalculateBounds:function(){var t=this._markers,i=this._childClusters,n;for(this._bounds=new L.LatLngBounds,delete this._wLatLng,n=t.length-1;n>=0;n--)this._expandBounds(t[n]);for(n=i.length-1;n>=0;n--)this._expandBounds(i[n])},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.DistanceGrid=function(n){this._cellSize=n;this._sqCellSize=n*n;this._grid={};this._objectPoint={}};L.DistanceGrid.prototype={addObject:function(n,t){var i=this._getCoord(t.x),r=this._getCoord(t.y),u=this._grid,f=u[r]=u[r]||{},e=f[i]=f[i]||[],o=L.Util.stamp(n);this._objectPoint[o]=t;e.push(n)},updateObject:function(n,t){this.removeObject(n);this.addObject(n,t)},removeObject:function(n,t){var r=this._getCoord(t.x),o=this._getCoord(t.y),s=this._grid,u=s[o]=s[o]||{},f=u[r]=u[r]||[],i,e;for(delete this._objectPoint[L.Util.stamp(n)],i=0,e=f.length;i<e;i++)if(f[i]===n)return f.splice(i,1),e===1&&delete u[r],!0},eachObject:function(n,t){var u,f,i,e,r,o,h,s=this._grid;for(u in s)if(s.hasOwnProperty(u)){r=s[u];for(f in r)if(r.hasOwnProperty(f))for(o=r[f],i=0,e=o.length;i<e;i++)h=n.call(t,o[i]),h&&(i--,e--)}},getNearObject:function(n){for(var s=this._getCoord(n.x),h=this._getCoord(n.y),i,r,f,u,c,e,o,v=this._objectPoint,l=this._sqCellSize,a=null,t=h-1;t<=h+1;t++)if(f=this._grid[t],f)for(i=s-1;i<=s+1;i++)if(u=f[i],u)for(r=0,c=u.length;r<c;r++)e=u[r],o=this._sqDist(v[L.Util.stamp(e)],n),o<l&&(l=o,a=e);return a},_getCoord:function(n){return Math.floor(n/this._cellSize)},_sqDist:function(n,t){var i=t.x-n.x,r=t.y-n.y;return i*i+r*r}},function(){L.QuickHull={getDistant:function(n,t){var i=t[1].lat-t[0].lat,r=t[0].lng-t[1].lng;return r*(n.lat-t[0].lat)+i*(n.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(n,t){for(var f=0,e=null,o=[],r,u,i=t.length-1;i>=0;i--){if(r=t[i],u=this.getDistant(r,n),u>0)o.push(r);else continue;u>f&&(f=u,e=r)}return{maxPoint:e,newPoints:o}},buildConvexHull:function(n,t){var r=[],i=this.findMostDistantPointFromBaseLine(n,t);return i.maxPoint?(r=r.concat(this.buildConvexHull([n[0],i.maxPoint],i.newPoints)),r.concat(this.buildConvexHull([i.maxPoint,n[1]],i.newPoints))):[n]},getConvexHull:function(n){for(var r=!1,u=!1,f=null,e=null,t,i=n.length-1;i>=0;i--)t=n[i],(r===!1||t.lat>r)&&(f=t,r=t.lat),(u===!1||t.lat<u)&&(e=t,u=t.lat);return[].concat(this.buildConvexHull([e,f],n),this.buildConvexHull([f,e],n))}}}();L.MarkerCluster.include({getConvexHull:function(){for(var i=this.getAllChildMarkers(),r=[],u=[],t,f,n=i.length-1;n>=0;n--)f=i[n].getLatLng(),r.push(f);for(t=L.QuickHull.getConvexHull(r),n=t.length-1;n>=0;n--)u.push(t[n][0]);return u}});L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var n=this.getAllChildMarkers(),r=this._group,u=r._map,t=u.latLngToLayerPoint(this._latlng),i;this._group._unspiderfy();this._group._spiderfied=this;n.length>=this._circleSpiralSwitchover?i=this._generatePointsSpiral(n.length,t):(t.y+=10,i=this._generatePointsCircle(n.length,t));this._animationSpiderfy(n,i)}},unspiderfy:function(n){this._group._inZoomAnimation||(this._animationUnspiderfy(n),this._group._spiderfied=null)},_generatePointsCircle:function(n,t){var e=this._circleFootSeparation*(2+n),f=e/this._2PI,o=this._2PI/n,r=[],i,u;for(r.length=n,i=n-1;i>=0;i--)u=this._circleStartAngle+i*o,r[i]=new L.Point(t.x+f*Math.cos(u),t.y+f*Math.sin(u))._round();return r},_generatePointsSpiral:function(n,t){var r=this._spiralLengthStart,u=0,f=[],i;for(f.length=n,i=n-1;i>=0;i--)u+=this._spiralFootSeparation/r+i*.0005,f[i]=new L.Point(t.x+r*Math.cos(u),t.y+r*Math.sin(u))._round(),r+=this._2PI*this._spiralLengthFactor/u;return f}});L.MarkerCluster.include(L.DomUtil.TRANSITION?{_animationSpiderfy:function(n,t){for(var l=this,e=this._group,s=e._map,v=s.latLngToLayerPoint(this._latlng),r,f,h,a,c,o,i,u=n.length-1;u>=0;u--)r=n[u],r.setZIndexOffset(1e6),r.setOpacity(0),L.FeatureGroup.prototype.addLayer.call(e,r),r._setPos(v);for(e._forceLayout(),e._animationStart(),a=L.Browser.svg?0:.3,c=L.Path.SVG_NS,u=n.length-1;u>=0;u--)(h=s.layerPointToLatLng(t[u]),r=n[u],r._preSpiderfyLatlng=r._latlng,r.setLatLng(h),r.setOpacity(1),f=new L.Polyline([l._latlng,h],{weight:1.5,color:"#222",opacity:a}),s.addLayer(f),r._spiderLeg=f,L.Browser.svg)&&(o=f._path.getTotalLength(),f._path.setAttribute("stroke-dasharray",o+","+o),i=document.createElementNS(c,"animate"),i.setAttribute("attributeName","stroke-dashoffset"),i.setAttribute("begin","indefinite"),i.setAttribute("from",o),i.setAttribute("to",0),i.setAttribute("dur",.25),f._path.appendChild(i),i.beginElement(),i=document.createElementNS(c,"animate"),i.setAttribute("attributeName","stroke-opacity"),i.setAttribute("attributeName","stroke-opacity"),i.setAttribute("begin","indefinite"),i.setAttribute("from",0),i.setAttribute("to",.5),i.setAttribute("dur",.25),f._path.appendChild(i),i.beginElement());if(l.setOpacity(.3),L.Browser.svg)for(this._group._forceLayout(),u=n.length-1;u>=0;u--)r=n[u]._spiderLeg,r.options.opacity=.5,r._path.setAttribute("stroke-opacity",.5);setTimeout(function(){e._animationEnd();e.fire("spiderfied")},250)},_animationUnspiderfy:function(n){var f=this._group,e=f._map,o=n?e._latLngToNewLayerPoint(this._latlng,n.zoom,n.center):e.latLngToLayerPoint(this._latlng),u=this.getAllChildMarkers(),s=L.Browser.svg,t,i,r;for(f._animationStart(),this.setOpacity(1),i=u.length-1;i>=0;i--)t=u[i],t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,t._setPos(o),t.setOpacity(0),s&&(r=t._spiderLeg._path.childNodes[0],r.setAttribute("to",r.getAttribute("from")),r.setAttribute("from",0),r.beginElement(),r=t._spiderLeg._path.childNodes[1],r.setAttribute("from",.5),r.setAttribute("to",0),r.setAttribute("stroke-opacity",0),r.beginElement(),t._spiderLeg._path.setAttribute("stroke-opacity",0));setTimeout(function(){var n=0;for(i=u.length-1;i>=0;i--)t=u[i],t._spiderLeg&&n++;for(i=u.length-1;i>=0;i--)(t=u[i],t._spiderLeg)&&(t.setOpacity(1),t.setZIndexOffset(0),n>1&&L.FeatureGroup.prototype.removeLayer.call(f,t),e.removeLayer(t._spiderLeg),delete t._spiderLeg);f._animationEnd()},250)}}:{_animationSpiderfy:function(n,t){for(var u=this._group,o=u._map,i,f,e,r=n.length-1;r>=0;r--)e=o.layerPointToLatLng(t[r]),i=n[r],i._preSpiderfyLatlng=i._latlng,i.setLatLng(e),i.setZIndexOffset(1e6),L.FeatureGroup.prototype.addLayer.call(u,i),f=new L.Polyline([this._latlng,e],{weight:1.5,color:"#222"}),o.addLayer(f),i._spiderLeg=f;this.setOpacity(.3);u.fire("spiderfied")},_animationUnspiderfy:function(){var i=this._group,u=i._map,r=this.getAllChildMarkers(),n,t;for(this.setOpacity(1),t=r.length-1;t>=0;t--)n=r[t],L.FeatureGroup.prototype.removeLayer.call(i,n),n.setLatLng(n._preSpiderfyLatlng),delete n._preSpiderfyLatlng,n.setZIndexOffset(0),u.removeLayer(n._spiderLeg),delete n._spiderLeg}});L.MarkerClusterGroup.include({_spiderfied:null,_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this);if(this._map.options.zoomAnimation)this._map.on("zoomstart",this._unspiderfyZoomStart,this);else this._map.on("zoomend",this._unspiderfyWrapper,this);L.Browser.svg&&!L.Browser.touch&&this._map._initPathRoot()},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this);this._map.off("zoomstart",this._unspiderfyZoomStart,this);this._map.off("zoomanim",this._unspiderfyZoomAnim,this);this._unspiderfy()},_unspiderfyZoomStart:function(){if(this._map)this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(n){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(n))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(n){this._spiderfied&&this._spiderfied.unspiderfy(n)},_unspiderfyLayer:function(n){n._spiderLeg&&(L.FeatureGroup.prototype.removeLayer.call(this,n),n.setOpacity(1),n.setZIndexOffset(0),this._map.removeLayer(n._spiderLeg),delete n._spiderLeg)}})})(this);
//# sourceMappingURL=leaflet.markercluster-src.min.js.map
