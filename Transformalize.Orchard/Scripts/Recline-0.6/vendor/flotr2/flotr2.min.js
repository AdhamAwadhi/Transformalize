/*!
  * bean.js - copyright Jacob Thornton 2011
  * https://github.com/fat/bean
  * MIT License
  * special thanks to:
  * dean edwards: http://dean.edwards.name/
  * dperini: https://github.com/dperini/nwevents
  * the entire mootools team: github.com/mootools/mootools-core
  */
!function(n,t,i){typeof module!="undefined"?module.exports=i(n,t):typeof define=="function"&&typeof define.amd=="object"?define(i):t[n]=i(n,t)}("bean",this,function(n,t){var i=window,ft=t[n],et=/over|out/,a=/[^\.]*(?=\..*)\.|.*/,s=/\..*/,v="addEventListener",h="attachEvent",ot="removeEventListener",b="detachEvent",e=document||{},c=e.documentElement||{},r=c[v],y=r?v:h,p=Array.prototype.slice,st=/click|mouse|menu|drag|drop/i,ht=/^touch|^gesture/i,k={one:1},d=function(n,t,i){for(i=0;i<t.length;i++)n[t[i]]=1;return n}({},("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll "+(r?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend message readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":"")).split(" ")),u=function(){function t(n,t){while((t=t.parentNode)!==null)if(t===n)return!0;return!1}function n(n){var i=n.relatedTarget;return i?i!==this&&i.prefix!=="xul"&&!/document/.test(this.toString())&&!t(this,i):i===null}return{mouseenter:{base:"mouseover",condition:n},mouseleave:{base:"mouseout",condition:n},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),g=function(){var n="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),r=n.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),u=n.concat("char charCode key keyCode".split(" ")),f=n.concat("touches targetTouches changedTouches scale rotation".split(" ")),t="preventDefault",o=function(n){return function(){n[t]?n[t]():n.returnValue=!1}},i="stopPropagation",s=function(n){return function(){n[i]?n[i]():n.cancelBubble=!0}},h=function(n){return function(){n[t]();n[i]();n.stopped=!0}},l=function(n,t,i){for(var r,u=i.length;u--;)r=i[u],!(r in t)&&r in n&&(t[r]=n[r])};return function(a,v){var y={originalEvent:a,isNative:v},b,p,w;return a?(p=a.type,w=a.target||a.srcElement,y[t]=o(a),y[i]=s(a),y.stop=h(y),y.target=w&&w.nodeType===3?w.parentNode:w,v&&(p.indexOf("key")!==-1?(b=u,y.keyCode=a.which||a.keyCode):st.test(p)?(b=r,y.rightClick=a.which===3||a.button===2,y.pos={x:0,y:0},a.pageX||a.pageY?(y.clientX=a.pageX,y.clientY=a.pageY):(a.clientX||a.clientY)&&(y.clientX=a.clientX+e.body.scrollLeft+c.scrollLeft,y.clientY=a.clientY+e.body.scrollTop+c.scrollTop),et.test(p)&&(y.relatedTarget=a.relatedTarget||a[(p==="mouseover"?"from":"to")+"Element"])):ht.test(p)&&(b=f),l(a,y,b||n)),y):y}}(),nt=function(n,t){return!r&&!t&&(n===e||n===i)?c:n},ct=function(){function n(n,t,i,f,e){this.element=n;this.type=t;this.handler=i;this.original=f;this.namespaces=e;this.custom=u[t];this.isNative=d[t]&&n[y];this.eventType=r||this.isNative?t:"propertychange";this.customType=!r&&!this.isNative&&t;this.target=nt(n,this.isNative);this.eventSupport=this.target[y]}return n.prototype={inNamespaces:function(n){var t,i;if(!n)return!0;if(!this.namespaces)return!1;for(t=n.length;t--;)for(i=this.namespaces.length;i--;)if(n[t]===this.namespaces[i])return!0;return!1},matches:function(n,t,i){return this.element===n&&(!t||this.original===t)&&(!i||this.handler===i)}},n}(),f=function(){var n={},t=function(i,r,u,f,e){var h;if(r&&r!=="*"){var o=0,c,s=n["$"+r],l=i==="*";if(!s)return;for(c=s.length;o<c;o++)if((l||s[o].matches(i,u,f))&&!e(s[o],s,o,r))return}else for(h in n)h.charAt(0)==="$"&&t(i,h.substr(1),u,f,e)},i=function(t,i,r){var u,f=n["$"+i];if(f)for(u=f.length;u--;)if(f[u].matches(t,r,null))return!0;return!1},r=function(n,i,r){var u=[];return t(n,i,r,null,function(n){return u.push(n)}),u},u=function(t){return(n["$"+t.type]||(n["$"+t.type]=[])).push(t),t},f=function(i){t(i.element,i.type,null,i.handler,function(t,i,r){return i.splice(r,1),i.length===0&&delete n["$"+t.type],!1})},e=function(){var t,i=[];for(t in n)t.charAt(0)==="$"&&(i=i.concat(n[t]));return i};return{has:i,get:r,put:u,del:f,entries:e}}(),tt=r?function(n,t,i,r){n[r?v:ot](t,i,!1)}:function(n,t,i,r,u){u&&r&&n["_on"+u]===null&&(n["_on"+u]=0);n[r?h:b]("on"+t,i)},lt=function(n,t,r){return function(u){return u=g(u||((this.ownerDocument||this.document||this).parentWindow||i).event,!0),t.apply(n,[u].concat(r))}},it=function(n,t,u,f,e,o){return function(s){(f?f.apply(this,arguments):r?!0:s&&s.propertyName==="_on"+u||!s)&&(s&&(s=g(s||((this.ownerDocument||this.document||this).parentWindow||i).event,o)),t.apply(n,s&&(!e||e.length===0)?arguments:p.call(arguments,s?0:1).concat(e)))}},rt=function(n,t,i,r,u){return function(){n(t,i,u);r.apply(this,arguments)}},ut=function(n,t,i,r){for(var u,c=t&&t.replace(s,""),o=f.get(n,c,i),e=0,h=o.length;e<h;e++)o[e].inNamespaces(r)&&((u=o[e]).eventSupport&&tt(u.target,u.eventType,u.handler,!1,u.type),f.del(u))},at=function(n,t,i,r,e){var h,o=t.replace(s,""),c=t.replace(a,"").split(".");if(f.has(n,o,i))return n;o==="unload"&&(i=rt(ut,n,o,i,r));u[o]&&(u[o].condition&&(i=it(n,i,o,u[o].condition,!0)),o=u[o].base||o);h=f.put(new ct(n,o,i,r,c[0]&&c));h.handler=h.isNative?lt(n,h.handler,e):it(n,h.handler,o,!1,e,!1);h.eventSupport&&tt(h.target,h.eventType,h.handler,!0,h.customType)},vt=function(n,t,i){return function(r){for(var f,e=typeof n=="string"?i(n,this):n,u=r.target;u&&u!==this;u=u.parentNode)for(f=e.length;f--;)if(e[f]===u)return t.apply(u,arguments)}},o=function(n,t,i){var f,r,e,c,l=ut,h=t&&typeof t=="string";if(h&&t.indexOf(" ")>0){for(t=t.split(" "),c=t.length;c--;)o(n,t[c],i);return n}if(r=h&&t.replace(s,""),r&&u[r]&&(r=u[r].type),!t||h)(e=h&&t.replace(a,""))&&(e=e.split(".")),l(n,r,i,e);else if(typeof t=="function")l(n,null,t);else for(f in t)t.hasOwnProperty(f)&&o(n,f,t[f]);return n},l=function(n,t,i,r,u){var f,s,h,e,c=i,a=i&&typeof i=="string";if(t&&!i&&typeof t=="object")for(f in t)t.hasOwnProperty(f)&&l.apply(this,[n,f,t[f]]);else for(e=arguments.length>3?p.call(arguments,3):[],s=(a?i:t).split(" "),a&&(i=vt(t,c=r,u))&&(e=p.call(e,1)),this===k&&(i=rt(o,n,t,i,c)),h=s.length;h--;)at(n,s[h],i,c,e);return n},yt=function(){return l.apply(k,arguments)},pt=r?function(n,t,r){var u=e.createEvent(n?"HTMLEvents":"UIEvents");u[n?"initEvent":"initUIEvent"](t,!0,!0,i,1);r.dispatchEvent(u)}:function(n,t,i){i=nt(i,n);n?i.fireEvent("on"+t,e.createEventObject()):i["_on"+t]++},wt=function(n,t,i){for(var r,c,u,o,h=t.split(" "),e=h.length;e--;)if(t=h[e].replace(s,""),(u=h[e].replace(a,""))&&(u=u.split(".")),u||i||!n[y])for(o=f.get(n,t),i=[!1].concat(i),r=0,c=o.length;r<c;r++)o[r].inNamespaces(u)&&o[r].handler.apply(n,i);else pt(d[t],t,n);return n},bt=function(n,t,i){for(var r=0,u=f.get(t,i),e=u.length;r<e;r++)u[r].original&&l(n,u[r].type,u[r].original);return n},kt={add:l,one:yt,remove:o,clone:bt,fire:wt,noConflict:function(){return t[n]=ft,this}},w;return i[h]&&(w=function(){var n,t=f.entries();for(n in t)t[n].type&&t[n].type!=="unload"&&o(t[n].element,t[n].type);i[b]("onunload",w);i.CollectGarbage&&i.CollectGarbage()},i[h]("onunload",w)),kt}),function(){var t=this,i=this.Flotr,n;n={_:_,bean:bean,isIphone:/iphone/i.test(navigator.userAgent),isIE:navigator.appVersion.indexOf("MSIE")!=-1?parseFloat(navigator.appVersion.split("MSIE")[1]):!1,graphTypes:{},plugins:{},addType:function(t,i){n.graphTypes[t]=i;n.defaultOptions[t]=i.options||{};n.defaultOptions.defaultType=n.defaultOptions.defaultType||t},addPlugin:function(t,i){n.plugins[t]=i;n.defaultOptions[t]=i.options||{}},draw:function(t,i,r,u){return u=u||n.Graph,new u(t,i,r)},merge:function(t,i){var u,r,f=i||{};for(u in t)r=t[u],f[u]=r&&typeof r=="object"?r.constructor===Array?this._.clone(r):r.constructor===RegExp||this._.isElement(r)?r:n.merge(r,i?i[u]:undefined):r;return f},clone:function(t){return n.merge(t,{})},getTickSize:function(t,i,r,u){var o=(r-i)/t,s=n.getMagnitude(o),f=10,e=o/s;return e<1.5?f=1:e<2.25?f=2:e<3?f=u===0?2:2.5:e<7.5&&(f=5),f*s},defaultTickFormatter:function(n){return n+""},defaultTrackFormatter:function(n){return"("+n.x+", "+n.y+")"},engineeringNotation:function(n,t,i){var r=["Y","Z","E","P","T","G","M","k",""],u=r.length;if(i=i||1e3,t=Math.pow(10,t||2),n===0)return 0;if(n>1)while(u--&&n>=i)n/=i;else for(r=["y","z","a","f","p","n","µ","m",""],u=r.length;u--&&n<1;)n*=i;return Math.round(n*t)/t+r[u]},getMagnitude:function(n){return Math.pow(10,Math.floor(Math.log(n)/Math.LN10))},toPixel:function(n){return Math.floor(n)+.5},toRad:function(n){return-n*(Math.PI/180)},floorInBase:function(n,t){return t*Math.floor(n/t)},drawText:function(t,i,r,u,f){if(!t.fillText){t.drawText(i,r,u,f);return}f=this._.extend({size:n.defaultOptions.fontSize,color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},f);t.save();t.translate(r,u);t.rotate(f.angle);t.fillStyle=f.color;t.font=(f.weight>1?"bold ":"")+f.size*1.3+"px sans-serif";t.textAlign=f.textAlign;t.textBaseline=f.textBaseline;t.fillText(i,0,0);t.restore()},getBestTextAlign:function(t,i){return i=i||{textAlign:"center",textBaseline:"middle"},t+=n.getTextAngleFromAlign(i),Math.abs(Math.cos(t))>.01&&(i.textAlign=Math.cos(t)>0?"right":"left"),Math.abs(Math.sin(t))>.01&&(i.textBaseline=Math.sin(t)>0?"top":"bottom"),i},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":3*(Math.PI/4),"left middle":Math.PI,"left bottom":-3*(Math.PI/4),"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(t){return n.alignTable[t.textAlign+" "+t.textBaseline]||0},noConflict:function(){return t.Flotr=i,this}};t.Flotr=n}();Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],ieBackgroundColor:"#FFFFFF",title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:!0,fontColor:"#545454",fontSize:7.5,resolution:1,parseFloat:!0,preventDefault:!0,xaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,mode:"normal",timeFormat:null,timeMode:"UTC",timeUnit:"millisecond",scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,backgroundImage:null,watermarkAlpha:.4,tickColor:"#DDDDDD",labelMargin:3,verticalLines:!0,minorVerticalLines:null,horizontalLines:!0,minorHorizontalLines:null,outlineWidth:1,outline:"nsew",circular:!1},mouse:{track:!1,trackAll:!1,position:"se",relative:!1,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,trackY:!0,radius:3,fillColor:null,fillOpacity:.4}},function(){function n(){this.rgba=["r","g","b","a"];for(var n=4;-1<--n;)this[this.rgba[n]]=arguments[n]||(n==3?1:0);this.normalize()}var t=Flotr._,i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};n.prototype={scale:function(){for(var n=4;-1<--n;)t.isUndefined(arguments[n])||(this[this.rgba[n]]*=arguments[n]);return this.normalize()},alpha:function(n){return t.isUndefined(n)||t.isNull(n)||(this.a=n),this.normalize()},clone:function(){return new n(this.r,this.b,this.g,this.a)},limit:function(n,t,i){return Math.max(Math.min(n,i),t)},normalize:function(){var n=this.limit;return this.r=n(parseInt(this.r,10),0,255),this.g=n(parseInt(this.g,10),0,255),this.b=n(parseInt(this.b,10),0,255),this.a=n(this.a,0,1),this},distance:function(t){if(t){t=new n.parse(t);for(var r=0,i=3;-1<--i;)r+=Math.abs(this[this.rgba[i]]-t[this.rgba[i]]);return r}},toString:function(){return this.a>=1?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"},contrast:function(){var n=1-(.299*this.r+.587*this.g+.114*this.b)/255;return n<.5?"#000000":"#ffffff"}};t.extend(n,{parse:function(t){var r,u;return t instanceof n?t:(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?new n(parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)):(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?new n(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)):(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?new n(parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)):(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))?new n(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),parseFloat(r[4])):(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?new n(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55):(r=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))?new n(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55,parseFloat(r[4])):(u=(t+"").replace(/^\s*([\S\s]*?)\s*$/,"$1").toLowerCase(),u=="transparent")?new n(255,255,255,0):(r=i[u])?new n(r[0],r[1],r[2]):new n(0,0,0,0)},processColor:function(i,r){var o=r.opacity,u,e,f,s,h;if(!i)return"rgba(0, 0, 0, 0)";if(i instanceof n)return i.alpha(o).toString();if(t.isString(i))return n.parse(i).alpha(o).toString();if(u=i.colors?i:{colors:i},!r.ctx)return t.isArray(u.colors)?n.parse(t.isArray(u.colors[0])?u.colors[0][1]:u.colors[0]).alpha(o).toString():"rgba(0, 0, 0, 0)";for(u=t.extend({start:"top",end:"bottom"},u),/top/i.test(u.start)&&(r.x1=0),/left/i.test(u.start)&&(r.y1=0),/bottom/i.test(u.end)&&(r.x2=0),/right/i.test(u.end)&&(r.y2=0),h=r.ctx.createLinearGradient(r.x1,r.y1,r.x2,r.y2),e=0;e<u.colors.length;e++)f=u.colors[e],t.isArray(f)?(s=f[0],f=f[1]):s=e/(u.colors.length-1),h.addColorStop(s,n.parse(f).alpha(o));return h}});Flotr.Color=n}();Flotr.Date={set:function(n,t,i,r){i=i||"UTC";t="set"+(i==="UTC"?"UTC":"")+t;n[t](r)},get:function(n,t,i){return i=i||"UTC",t="get"+(i==="UTC"?"UTC":"")+t,n[t]()},format:function(n,t,i){function s(n){return n+="",n.length==1?"0"+n:n}var r,h,f,u,e,o;if(n){for(r=this.get,h={h:r(n,"Hours",i).toString(),H:s(r(n,"Hours",i)),M:s(r(n,"Minutes",i)),S:s(r(n,"Seconds",i)),s:r(n,"Milliseconds",i),d:r(n,"Date",i).toString(),m:(r(n,"Month",i)+1).toString(),y:r(n,"FullYear",i).toString(),b:Flotr.Date.monthNames[r(n,"Month",i)]},f=[],e=!1,o=0;o<t.length;++o)u=t.charAt(o),e?(f.push(h[u]||u),e=!1):u=="%"?e=!0:f.push(u);return f.join("")}},getFormat:function(n,t){var i=Flotr.Date.timeUnits;return n<i.second?"%h:%M:%S.%s":n<i.minute?"%h:%M:%S":n<i.day?t<2*i.day?"%h:%M":"%b %d %h:%M":n<i.month?"%b %d":n<i.year?t<i.year?"%b":"%b %y":"%y"},formatter:function(n,t){var i=t.options,r=Flotr.Date.timeUnits[i.timeUnit],u=new Date(n*r),f,e;return t.options.timeFormat?Flotr.Date.format(u,i.timeFormat,i.timeMode):(f=(t.max-t.min)*r,e=t.tickSize*Flotr.Date.timeUnits[t.tickUnit],Flotr.Date.format(u,Flotr.Date.getFormat(e,f),i.timeMode))},generator:function(n){function a(n){r(t,n,i,Flotr.floorInBase(v(t,n,i),f))}for(var r=this.set,v=this.get,u=this.timeUnits,c=this.spec,l=n.options,i=l.timeMode,y=u[l.timeUnit],p=n.min*y,w=n.max*y,it=(w-p)/l.noTicks,k=[],f=n.tickSize,s,t,h,b,o,g,nt,tt,d=l.tickFormatter===Flotr.defaultTickFormatter?this.formatter:l.tickFormatter,e=0;e<c.length-1;++e)if(t=c[e][0]*u[c[e][1]],it<(t+c[e+1][0]*u[c[e+1][1]])/2&&t>=f)break;f=c[e][0];s=c[e][1];s=="year"&&(f=Flotr.getTickSize(l.noTicks*u.year,p,w,0),f==.5&&(s="month",f=6));n.tickUnit=s;n.tickSize=f;h=f*u[s];t=new Date(p);switch(s){case"millisecond":a("Milliseconds");break;case"second":a("Seconds");break;case"minute":a("Minutes");break;case"hour":a("Hours");break;case"month":a("Month");break;case"year":a("FullYear")}h>=u.second&&r(t,"Milliseconds",i,0);h>=u.minute&&r(t,"Seconds",i,0);h>=u.hour&&r(t,"Minutes",i,0);h>=u.day&&r(t,"Hours",i,0);h>=u.day*4&&r(t,"Date",i,1);h>=u.year&&r(t,"Month",i,0);b=0;o=NaN;do g=o,o=t.getTime(),k.push({v:o/y,label:d(o/y,n)}),s=="month"?f<1?(r(t,"Date",i,1),nt=t.getTime(),r(t,"Month",i,v(t,"Month",i)+1),tt=t.getTime(),t.setTime(o+b*u.hour+(tt-nt)*f),b=v(t,"Hours",i),r(t,"Hours",i,0)):r(t,"Month",i,v(t,"Month",i)+f):s=="year"?r(t,"FullYear",i,v(t,"FullYear",i)+f):t.setTime(o+h);while(o<w&&o!=g);return k},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:864e5*365.2425},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},function(){var n=Flotr._;Flotr.DOM={addClass:function(t,i){var r=t.className?t.className:"";n.include(r.split(/\s+/g),i)||(t.className=(r?r+" ":"")+i)},create:function(n){return document.createElement(n)},node:function(n){var t=Flotr.DOM.create("div"),i;return t.innerHTML=n,i=t.children[0],t.innerHTML="",i},empty:function(n){n.innerHTML=""},hide:function(n){Flotr.DOM.setStyles(n,{display:"none"})},insert:function(t,i){n.isString(i)?t.innerHTML+=i:n.isElement(i)&&t.appendChild(i)},opacity:function(n,t){n.style.opacity=t},position:function(n,t){return n.offsetParent?(t=this.position(n.offsetParent),t.left+=n.offsetLeft,t.top+=n.offsetTop,t):{left:n.offsetLeft||0,top:n.offsetTop||0}},removeClass:function(t,i){var r=t.className?t.className:"";t.className=n.filter(r.split(/\s+/g),function(n){if(n!=i)return!0}).join(" ")},setStyles:function(t,i){n.each(i,function(n,i){t.style[i]=n})},show:function(n){Flotr.DOM.setStyles(n,{display:""})},size:function(n){return{height:n.offsetHeight,width:n.offsetWidth}}}}(),function(){var n=Flotr,t=n.bean;n.EventAdapter={observe:function(n,i,r){return t.add(n,i,r),this},fire:function(n,i,r){return t.fire(n,i,r),typeof Prototype!="undefined"&&Event.fire(n,i,r),this},stopObserving:function(n,i,r){return t.remove(n,i,r),this},eventPointer:function(t){if(!n._.isUndefined(t.touches)&&t.touches.length>0)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(!n._.isUndefined(t.changedTouches)&&t.changedTouches.length>0)return{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY};if(t.pageX||t.pageY)return{x:t.pageX,y:t.pageY};if(t.clientX||t.clientY){var i=document,r=i.body,u=i.documentElement;return{x:t.clientX+r.scrollLeft+u.scrollLeft,y:t.clientY+r.scrollTop+u.scrollTop}}}}}(),function(){var n=Flotr,t=n.DOM,r=n._,i=function(n){this.o=n};i.prototype={dimensions:function(n,t,i,r){return n?this.o.html?this.html(n,this.o.element,i,r):this.canvas(n,t):{width:0,height:0}},canvas:function(t,i){if(this.o.textEnabled){i=i||{};var s=this.measureText(t,i),r=s.width,u=i.size||n.defaultOptions.fontSize,f=i.angle||0,e=Math.cos(f),o=Math.sin(f);return{width:Math.abs(e*r)+Math.abs(o*u)+2,height:Math.abs(o*r)+Math.abs(e*u)+6}}},html:function(n,i,r,u){var f=t.create("div");return t.setStyles(f,{position:"absolute",top:"-10000px"}),t.insert(f,'<div style="'+r+'" class="'+u+' flotr-dummy-div">'+n+"<\/div>"),t.insert(this.o.element,f),t.size(f)},measureText:function(t,i){var u=this.o.ctx,f;return!u.fillText||n.isIphone&&u.measure?{width:u.measure(t,i)}:(i=r.extend({size:n.defaultOptions.fontSize,weight:1,angle:0},i),u.save(),u.font=(i.weight>1?"bold ":"")+i.size*1.3+"px sans-serif",f=u.measureText(t),u.restore(),f)}};Flotr.Text=i}(),function(){function u(){return t.observe.apply(this,arguments),this._handles.push(arguments),this}var r=Flotr.DOM,t=Flotr.EventAdapter,n=Flotr._,i=Flotr;Graph=function(r,u,f){this._setEl(r);this._initMembers();this._initPlugins();t.fire(this.el,"flotr:beforeinit",[this]);this.data=u;this.series=i.Series.getSeries(u);this._initOptions(f);this._initGraphTypes();this._initCanvas();this._text=new i.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled});t.fire(this.el,"flotr:afterconstruct",[this]);this._initEvents();this.findDataRanges();this.calculateSpacing();this.draw(n.bind(function(){t.fire(this.el,"flotr:afterinit",[this])},this))};Graph.prototype={destroy:function(){t.fire(this.el,"flotr:destroy");n.each(this._handles,function(n){t.stopObserving.apply(this,n)});this._handles=[];this.el.graph=null},observe:u,_observe:u,processColor:function(t,r){var u={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};return n.extend(u,r),i.Color.processColor(t,u)},findDataRanges:function(){var r=this.axes,u,f,t,o,e;n.each(this.series,function(n){t=n.getRange();t&&(u=n.xaxis,f=n.yaxis,u.datamin=Math.min(t.xmin,u.datamin),u.datamax=Math.max(t.xmax,u.datamax),f.datamin=Math.min(t.ymin,f.datamin),f.datamax=Math.max(t.ymax,f.datamax),u.used=u.used||t.xused,f.used=f.used||t.yused)},this);r.x.used||r.x2.used||(r.x.used=!0);r.y.used||r.y2.used||(r.y.used=!0);n.each(r,function(n){n.calculateRange()});o=n.keys(i.graphTypes);e=!1;n.each(this.series,function(t){t.hide||(n.each(o,function(n){t[n]&&t[n].show&&(this.extendRange(n,t),e=!0)},this),e||this.extendRange(this.options.defaultType,t))},this)},extendRange:function(n,t){this[n].extendRange&&this[n].extendRange(t,t.data,t[n],this[n]);this[n].extendYRange&&this[n].extendYRange(t.yaxis,t.data,t[n],this[n]);this[n].extendXRange&&this[n].extendXRange(t.xaxis,t.data,t[n],this[n])},calculateSpacing:function(){var c=this.axes,i=this.options,a=this.series,e=i.grid.labelMargin,v=this._text,u=c.x,o=c.x2,r=c.y,f=c.y2,s=i.grid.outlineWidth,h,l,t;for(n.each(c,function(n){n.calculateTicks();n.calculateTextDimensions(v,i)}),l=v.dimensions(i.title,{size:i.fontSize*1.5},"font-size:1em;font-weight:bold;","flotr-title"),this.titleHeight=l.height,l=v.dimensions(i.subtitle,{size:i.fontSize},"font-size:smaller;","flotr-subtitle"),this.subtitleHeight=l.height,h=0;h<i.length;++h)a[h].points.show&&(s=Math.max(s,a[h].points.radius+a[h].points.lineWidth/2));t=this.plotOffset;u.options.margin===!1?(t.bottom=0,t.top=0):(t.bottom+=(i.grid.circular?0:u.used&&u.options.showLabels?u.maxLabel.height+e:0)+(u.used&&u.options.title?u.titleSize.height+e:0)+s,t.top+=(i.grid.circular?0:o.used&&o.options.showLabels?o.maxLabel.height+e:0)+(o.used&&o.options.title?o.titleSize.height+e:0)+this.subtitleHeight+this.titleHeight+s);r.options.margin===!1?(t.left=0,t.right=0):(t.left+=(i.grid.circular?0:r.used&&r.options.showLabels?r.maxLabel.width+e:0)+(r.used&&r.options.title?r.titleSize.width+e:0)+s,t.right+=(i.grid.circular?0:f.used&&f.options.showLabels?f.maxLabel.width+e:0)+(f.used&&f.options.title?f.titleSize.width+e:0)+s);t.top=Math.floor(t.top);this.plotWidth=this.canvasWidth-t.left-t.right;this.plotHeight=this.canvasHeight-t.bottom-t.top;u.length=o.length=this.plotWidth;r.length=f.length=this.plotHeight;r.offset=f.offset=this.plotHeight;u.setScale();o.setScale();r.setScale();f.setScale()},draw:function(n){var r=this.ctx,i;if(t.fire(this.el,"flotr:beforedraw",[this.series,this]),this.series.length){for(r.save(),r.translate(this.plotOffset.left,this.plotOffset.top),i=0;i<this.series.length;i++)this.series[i].hide||this.drawSeries(this.series[i]);r.restore();this.clip()}t.fire(this.el,"flotr:afterdraw",[this.series,this]);n&&n()},drawSeries:function(t){function r(n,t){var i=this.getOptions(n,t);this[t].draw(i)}var u=!1;t=t||this.series;n.each(i.graphTypes,function(n,i){t[i]&&t[i].show&&this[i]&&(u=!0,r.call(this,t,i))},this);u||r.call(this,t,this.options.defaultType)},getOptions:function(n,t){var u=n[t],o=this[t],f=n.xaxis,e=n.yaxis,r={context:this.ctx,width:this.plotWidth,height:this.plotHeight,fontSize:this.options.fontSize,fontColor:this.options.fontColor,textEnabled:this.textEnabled,htmlText:this.options.HtmlText,text:this._text,element:this.el,data:n.data,color:n.color,shadowSize:n.shadowSize,xScale:f.d2p,yScale:e.d2p,xInverse:f.p2d,yInverse:e.p2d};return r=i.merge(u,r),r.fillStyle=this.processColor(u.fillColor||n.color,{opacity:u.fillOpacity}),r},getEventPosition:function(n){var h=document,c=h.body,l=h.documentElement,o=this.axes,s=this.plotOffset,a=this.lastMousePos,i=t.eventPointer(n),v=i.x-a.pageX,y=i.y-a.pageY,u,f,e;return"ontouchstart"in this.el?(u=r.position(this.overlay),f=i.x-u.left-s.left,e=i.y-u.top-s.top):(u=this.overlay.getBoundingClientRect(),f=n.clientX-u.left-s.left-c.scrollLeft-l.scrollLeft,e=n.clientY-u.top-s.top-c.scrollTop-l.scrollTop),{x:o.x.p2d(f),x2:o.x2.p2d(f),y:o.y.p2d(e),y2:o.y2.p2d(e),relX:f,relY:e,dX:v,dY:y,absX:i.x,absY:i.y,pageX:i.x,pageY:i.y}},clickHandler:function(n){if(this.ignoreClick)return this.ignoreClick=!1,this.ignoreClick;t.fire(this.el,"flotr:click",[this.getEventPosition(n),this])},mouseMoveHandler:function(n){if(!this.mouseDownMoveHandler){var i=this.getEventPosition(n);t.fire(this.el,"flotr:mousemove",[n,i,this]);this.lastMousePos=i}},mouseDownHandler:function(i){this.mouseUpHandler||(this.mouseUpHandler=n.bind(function(n){t.stopObserving(document,"mouseup",this.mouseUpHandler);t.stopObserving(document,"mousemove",this.mouseDownMoveHandler);this.mouseDownMoveHandler=null;this.mouseUpHandler=null;t.fire(this.el,"flotr:mouseup",[n,this])},this),this.mouseDownMoveHandler=n.bind(function(n){var r=this.getEventPosition(n);t.fire(this.el,"flotr:mousemove",[i,r,this]);this.lastMousePos=r},this),t.observe(document,"mouseup",this.mouseUpHandler),t.observe(document,"mousemove",this.mouseDownMoveHandler),t.fire(this.el,"flotr:mousedown",[i,this]),this.ignoreClick=!1)},drawTooltip:function(n,t,i,u){var h=this.getMouseTrack(),f="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",e=u.position,o=u.margin,s=this.plotOffset;t!==null&&i!==null?(u.relative?(e.charAt(0)=="n"?f+="bottom:"+(o-s.top-i+this.canvasHeight)+"px;top:auto;":e.charAt(0)=="s"&&(f+="top:"+(o+s.top+i)+"px;bottom:auto;"),e.charAt(1)=="e"?f+="left:"+(o+s.left+t)+"px;right:auto;":e.charAt(1)=="w"&&(f+="right:"+(o-s.left-t+this.canvasWidth)+"px;left:auto;")):(e.charAt(0)=="n"?f+="top:"+(o+s.top)+"px;bottom:auto;":e.charAt(0)=="s"&&(f+="bottom:"+(o+s.bottom)+"px;top:auto;"),e.charAt(1)=="e"?f+="right:"+(o+s.right)+"px;left:auto;":e.charAt(1)=="w"&&(f+="left:"+(o+s.left)+"px;right:auto;")),h.style.cssText=f,r.empty(h),r.insert(h,n),r.show(h)):r.hide(h)},clip:function(n){var t=this.plotOffset,r=this.canvasWidth,u=this.canvasHeight;n=n||this.ctx;i.isIE&&i.isIE<9?(n.save(),n.fillStyle=this.processColor(this.options.ieBackgroundColor),n.fillRect(0,0,r,t.top),n.fillRect(0,0,t.left,u),n.fillRect(0,u-t.bottom,r,t.bottom),n.fillRect(r-t.right,0,t.right,u),n.restore()):(n.clearRect(0,0,r,t.top),n.clearRect(0,0,t.left,u),n.clearRect(0,u-t.bottom,r,t.bottom),n.clearRect(r-t.right,0,t.right,u))},_initMembers:function(){this._handles=[];this.lastMousePos={pageX:null,pageY:null};this.plotOffset={left:0,right:0,top:0,bottom:0};this.ignoreClick=!0;this.prevHit=null},_initGraphTypes:function(){n.each(i.graphTypes,function(n,t){this[t]=i.clone(n)},this)},_initEvents:function(){var i=this.el,r,u,f;"ontouchstart"in i?(r=n.bind(function(n){f=!0;t.stopObserving(document,"touchend",r);t.fire(i,"flotr:mouseup",[event,this]);this.multitouches=null;u||this.clickHandler(n)},this),this.observe(this.overlay,"touchstart",n.bind(function(n){u=!1;f=!1;this.ignoreClick=!1;n.touches&&n.touches.length>1&&(this.multitouches=n.touches);t.fire(i,"flotr:mousedown",[event,this]);this.observe(document,"touchend",r)},this)),this.observe(this.overlay,"touchmove",n.bind(function(n){var r=this.getEventPosition(n);this.options.preventDefault&&n.preventDefault();u=!0;this.multitouches||n.touches&&n.touches.length>1?this.multitouches=n.touches:f||t.fire(i,"flotr:mousemove",[event,r,this]);this.lastMousePos=r},this))):this.observe(this.overlay,"mousedown",n.bind(this.mouseDownHandler,this)).observe(i,"mousemove",n.bind(this.mouseMoveHandler,this)).observe(this.overlay,"click",n.bind(this.clickHandler,this)).observe(i,"mouseout",function(){t.fire(i,"flotr:mouseout")})},_initCanvas:function(){function h(u,f){return u||(u=r.create("canvas"),typeof FlashCanvas!="undefined"&&typeof u.getContext=="function"&&FlashCanvas.initElement(u),u.className="flotr-"+f,u.style.cssText="position:absolute;left:0px;top:0px;",r.insert(i,u)),n.each(t,function(n,t){(r.show(u),f!="canvas"||u.getAttribute(t)!==n)&&(u.setAttribute(t,n*e.resolution),u.style[t]=n+"px")}),u.context_=null,u}function c(n){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(n);var t=n.getContext("2d");return window.G_vmlCanvasManager||t.scale(e.resolution,e.resolution),t}for(var i=this.el,e=this.options,s=i.children,o=[],u,t,f=s.length;f--;)u=s[f],this.canvas||u.className!=="flotr-canvas"?this.overlay||u.className!=="flotr-overlay"?o.push(u):this.overlay=u:this.canvas=u;for(f=o.length;f--;)i.removeChild(o[f]);if(r.setStyles(i,{position:"relative"}),t={},t.width=i.clientWidth,t.height=i.clientHeight,t.width<=0||t.height<=0||e.resolution<=0)throw"Invalid dimensions for plot, width = "+t.width+", height = "+t.height+", resolution = "+e.resolution;this.canvas=h(this.canvas,"canvas");this.overlay=h(this.overlay,"overlay");this.ctx=c(this.canvas);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.octx=c(this.overlay);this.octx.clearRect(0,0,this.overlay.width,this.overlay.height);this.canvasHeight=t.height;this.canvasWidth=t.width;this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText},_initPlugins:function(){n.each(i.plugins,function(t,r){n.each(t.callbacks,function(t,i){this.observe(this.el,i,n.bind(t,this))},this);this[r]=i.clone(t);n.each(this[r],function(t,i){n.isFunction(t)&&(this[r][i]=n.bind(t,this))},this)},this)},_initOptions:function(r){var o=i.clone(i.defaultOptions),w,c,l;o.x2axis=n.extend(n.clone(o.xaxis),o.x2axis);o.y2axis=n.extend(n.clone(o.yaxis),o.y2axis);this.options=i.merge(r||{},o);this.options.grid.minorVerticalLines===null&&this.options.xaxis.scaling==="logarithmic"&&(this.options.grid.minorVerticalLines=!0);this.options.grid.minorHorizontalLines===null&&this.options.yaxis.scaling==="logarithmic"&&(this.options.grid.minorHorizontalLines=!0);t.fire(this.el,"flotr:afterinitoptions",[this]);this.axes=i.Axis.getAxes(this.options);for(var a=[],h=[],b=this.series.length,s=this.series.length,v=this.options.colors,k=[],y=0,e,p,u,f=s-1;f>-1;--f)e=this.series[f].color,e&&(--s,n.isNumber(e)?a.push(e):k.push(i.Color.parse(e)));for(f=a.length-1;f>-1;--f)s=Math.max(s,a[f]+1);for(f=0;h.length<s;)e=v.length==f?new i.Color(100,100,100):i.Color.parse(v[f]),w=y%2==1?-1:1,c=1+w*Math.ceil(y/2)*.2,e.scale(c,c,c),h.push(e),++f>=v.length&&(f=0,++y);for(f=0,p=0;f<b;++f){u=this.series[f];u.color?n.isNumber(u.color)&&(u.color=h[u.color].toString()):u.color=h[p++].toString();u.xaxis||(u.xaxis=this.axes.x);u.xaxis==1?u.xaxis=this.axes.x:u.xaxis==2&&(u.xaxis=this.axes.x2);u.yaxis||(u.yaxis=this.axes.y);u.yaxis==1?u.yaxis=this.axes.y:u.yaxis==2&&(u.yaxis=this.axes.y2);for(l in i.graphTypes)u[l]=n.extend(n.clone(this.options[l]),u[l]);u.mouse=n.extend(n.clone(this.options.mouse),u.mouse);n.isUndefined(u.shadowSize)&&(u.shadowSize=this.options.shadowSize)}},_setEl:function(n){if(n){if(n.graph instanceof Graph)n.graph.destroy();else if(!n.clientWidth)throw"The target container must be visible";}else throw"The target container doesn't exist";n.graph=this;this.el=n}};Flotr.Graph=Graph}(),function(){function n(n){this.orientation=1;this.offset=0;this.datamin=Number.MAX_VALUE;this.datamax=-Number.MAX_VALUE;t.extend(this,n)}function r(n,t){return n=Math.log(Math.max(n,Number.MIN_VALUE)),t!==Math.E&&(n/=Math.log(t)),n}function f(n,t){return t===Math.E?Math.exp(n):Math.pow(t,n)}var t=Flotr._,u="logarithmic";n.prototype={setScale:function(){var s=this.length,h=this.max,t=this.min,e=this.offset,o=this.orientation,n=this.options,c=n.scaling===u,i;i=c?s/(r(h,n.base)-r(t,n.base)):s/(h-t);this.scale=i;c?(this.d2p=function(u){return e+o*(r(u,n.base)-r(t,n.base))*i},this.p2d=function(u){return f((e+o*u)/i+r(t,n.base),n.base)}):(this.d2p=function(n){return e+o*(n-t)*i},this.p2d=function(n){return(e+o*n)/i+t})},calculateTicks:function(){var n=this.options;this.ticks=[];this.minorTicks=[];n.ticks?(this._cleanUserTicks(n.ticks,this.ticks),this._cleanUserTicks(n.minorTicks||[],this.minorTicks)):n.mode=="time"?this._calculateTimeTicks():n.scaling==="logarithmic"?this._calculateLogTicks():this._calculateTicks();t.each(this.ticks,function(n){n.label+=""});t.each(this.minorTicks,function(n){n.label+=""})},calculateRange:function(){var e,u,f;if(this.used){var n=this,t=n.options,i=t.min!==null?t.min:n.datamin,r=t.max!==null?t.max:n.datamax,o=t.autoscaleMargin;t.scaling=="logarithmic"&&(i<=0&&(i=n.datamin),r<=0&&(r=i));r==i&&(e=r?.01:1,t.min===null&&(i-=e),t.max===null&&(r+=e));t.scaling==="logarithmic"?(i<0&&(i=r/t.base),u=Math.log(r),t.base!=Math.E&&(u/=Math.log(t.base)),u=Math.ceil(u),f=Math.log(i),t.base!=Math.E&&(f/=Math.log(t.base)),f=Math.ceil(f),n.tickSize=Flotr.getTickSize(t.noTicks,f,u,t.tickDecimals===null?0:t.tickDecimals),t.minorTickFreq===null&&(t.minorTickFreq=u-f>10?0:u-f>5?2:5)):n.tickSize=Flotr.getTickSize(t.noTicks,i,r,t.tickDecimals);n.min=i;n.max=r;t.min===null&&t.autoscale&&(n.min-=n.tickSize*o,n.min<0&&n.datamin>=0&&(n.min=0),n.min=n.tickSize*Math.floor(n.min/n.tickSize));t.max===null&&t.autoscale&&(n.max+=n.tickSize*o,n.max>0&&n.datamax<=0&&n.datamax!=n.datamin&&(n.max=0),n.max=n.tickSize*Math.ceil(n.max/n.tickSize));n.min==n.max&&(n.max=n.min+1)}},calculateTextDimensions:function(n,t){var r="",u,i;if(this.options.showLabels)for(i=0;i<this.ticks.length;++i)u=this.ticks[i].label.length,u>r.length&&(r=this.ticks[i].label);this.maxLabel=n.dimensions(r,{size:t.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label");this.titleSize=n.dimensions(this.options.title,{size:t.fontSize*1.2,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(n,i){var e=this,s=this.options,u,f,o,r;for(t.isFunction(n)&&(n=n({min:e.min,max:e.max})),f=0;f<n.length;++f)r=n[f],typeof r=="object"?(u=r[0],o=r.length>1?r[1]:s.tickFormatter(u,{min:e.min,max:e.max})):(u=r,o=s.tickFormatter(u,{min:this.min,max:this.max})),i[f]={v:u,label:o}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this)},_calculateLogTicks:function(){var n=this,t=n.options,u,r,e=Math.log(n.max),f,o,s;for(t.base!=Math.E&&(e/=Math.log(t.base)),e=Math.ceil(e),f=Math.log(n.min),t.base!=Math.E&&(f/=Math.log(t.base)),f=Math.ceil(f),i=f;i<e;i+=n.tickSize)for(r=t.base==Math.E?Math.exp(i):Math.pow(t.base,i),o=r*(t.base==Math.E?Math.exp(n.tickSize):Math.pow(t.base,n.tickSize)),s=(o-r)/t.minorTickFreq,n.ticks.push({v:r,label:t.tickFormatter(r,{min:n.min,max:n.max})}),u=r+s;u<o;u+=s)n.minorTicks.push({v:u,label:t.tickFormatter(u,{min:n.min,max:n.max})});r=t.base==Math.E?Math.exp(i):Math.pow(t.base,i);n.ticks.push({v:r,label:t.tickFormatter(r,{min:n.min,max:n.max})})},_calculateTicks:function(){var n=this,i=n.options,r=n.tickSize,c=n.min,s=n.max,l=r*Math.ceil(c/r),u,o,t,h,e,f;for(i.minorTickFreq&&(o=r/i.minorTickFreq),e=0;(t=h=l+e*r)<=s;++e)if(u=i.tickDecimals,u===null&&(u=1-Math.floor(Math.log(r)/Math.LN10)),u<0&&(u=0),t=t.toFixed(u),n.ticks.push({v:t,label:i.tickFormatter(t,{min:n.min,max:n.max})}),i.minorTickFreq)for(f=0;f<i.minorTickFreq&&e*r+f*o<s;++f)t=h+f*o,n.minorTicks.push({v:t,label:i.tickFormatter(t,{min:n.min,max:n.max})})}};t.extend(n,{getAxes:function(t){return{x:new n({options:t.xaxis,n:1,length:this.plotWidth}),x2:new n({options:t.x2axis,n:2,length:this.plotWidth}),y:new n({options:t.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new n({options:t.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})}}});Flotr.Axis=n}(),function(){function n(n){t.extend(this,n)}var t=Flotr._;n.prototype={getRange:function(){var r=this.data,c=r.length,u=Number.MAX_VALUE,f=Number.MAX_VALUE,e=-Number.MAX_VALUE,o=-Number.MAX_VALUE,s=!1,h=!1,n,t,i;if(c<0||this.hide)return!1;for(i=0;i<c;i++)n=r[i][0],t=r[i][1],n!==null&&(n<u&&(u=n,s=!0),n>e&&(e=n,s=!0)),t!==null&&(t<f&&(f=t,h=!0),t>o&&(o=t,h=!0));return{xmin:u,xmax:e,ymin:f,ymax:o,xused:s,yused:h}}};t.extend(n,{getSeries:function(i){return t.map(i,function(i){var r;return i.data?(r=new n,t.extend(r,i)):r=new n({data:i}),r})}});Flotr.Series=n}();Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:.4,steps:!1,stacked:!1},stack:{values:[]},draw:function(n){var t=n.context,u=n.lineWidth,i=n.shadowSize,r;t.save();t.lineJoin="round";i&&(t.lineWidth=i/2,r=u/2+t.lineWidth/2,t.strokeStyle="rgba(0,0,0,0.1)",this.plot(n,r+i/2,!1),t.strokeStyle="rgba(0,0,0,0.2)",this.plot(n,r,!1));t.lineWidth=u;t.strokeStyle=n.color;this.plot(n,0,!0);t.restore()},plot:function(n,t,i){function tt(){!t&&n.fill&&c&&(e=p(c[0]),f.fillStyle=n.fillStyle,f.lineTo(a,nt),f.lineTo(e,nt),f.lineTo(e,s(c[1])),f.fill(),n.fillBorder&&f.stroke())}var f=n.context,d=n.width,g=n.height,p=n.xScale,s=n.yScale,u=n.data,h=n.stacked?this.stack:!1,w=u.length-1,l=null,y=null,nt=s(0),c=null,e,a,o,v,b,k,r;if(!(w<1)){for(f.beginPath(),r=0;r<w;++r){if(u[r][1]===null||u[r+1][1]===null){n.fill&&r>0&&u[r][1]&&(f.stroke(),tt(),c=null,f.closePath(),f.beginPath());continue}(e=p(u[r][0]),a=p(u[r+1][0]),c===null&&(c=u[r]),h?(b=h.values[u[r][0]]||0,k=h.values[u[r+1][0]]||h.values[u[r][0]]||0,o=s(u[r][1]+b),v=s(u[r+1][1]+k),i&&(h.values[u[r][0]]=u[r][1]+b,r==w-1&&(h.values[u[r+1][0]]=u[r+1][1]+k))):(o=s(u[r][1]),v=s(u[r+1][1])),o>g&&v>g||o<0&&v<0||e<0&&a<0||e>d&&a>d)||((l!=e||y!=o+t)&&f.moveTo(e,o+t),l=a,y=v+t,n.steps?(f.lineTo(l+t/2,o+t),f.lineTo(l+t/2,y)):f.lineTo(l,y))}n.fill&&(!n.fill||n.fillBorder)||f.stroke();tt();f.closePath()}},extendYRange:function(n,t,i,r){var e=n.options;if(i.stacked&&(!e.max&&e.max!==0||!e.min&&e.min!==0)){for(var h=n.max,c=n.min,o=r.positiveSums||{},s=r.negativeSums||{},u,f=0;f<t.length;f++)u=t[f][0]+"",t[f][1]>0?(o[u]=(o[u]||0)+t[f][1],h=Math.max(h,o[u])):(s[u]=(s[u]||0)+t[f][1],c=Math.min(c,s[u]));r.negativeSums=s;r.positiveSums=o;n.max=h;n.min=c}i.steps&&(this.hit=function(n){for(var i=n.data,u=n.args,o=n.yScale,f=u[0],s=i.length,r=u[1],e=n.xInverse(f.relX),h=f.relY,t=0;t<s-1;t++)if(e>=i[t][0]&&e<=i[t+1][0]){Math.abs(o(i[t][1])-h)<8&&(r.x=i[t][0],r.y=i[t][1],r.index=t,r.seriesIndex=n.index);break}},this.drawHit=function(n){var t=n.context,i=n.args,r=n.data,o=n.xScale,u=i.index,s=o(i.x),f=n.yScale(i.y),e;r.length-1>u&&(e=n.xScale(r[u+1][0]),t.save(),t.strokeStyle=n.color,t.lineWidth=n.lineWidth,t.beginPath(),t.moveTo(s,f),t.lineTo(e,f),t.stroke(),t.closePath(),t.restore())},this.clearHit=function(n){var o=n.context,i=n.args,r=n.data,s=n.xScale,t=n.lineWidth,u=i.index,f=s(i.x),h=n.yScale(i.y),e;r.length-1>u&&(e=n.xScale(r[u+1][0]),o.clearRect(f-t,h-t,e-f+2*t,2*t))})}});Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0,topPadding:.1,grouped:!1},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(n){var t=n.context;this.current+=1;t.save();t.lineJoin="miter";t.lineWidth=n.lineWidth;t.strokeStyle=n.color;n.fill&&(t.fillStyle=n.fillStyle);this.plot(n);t.restore()},plot:function(n){var u=n.data,t=n.context,h=n.shadowSize,r,i,f,e,o,s;if(!(u.length<1))for(this.translate(t,n.horizontal),r=0;r<u.length;r++)(i=this.getBarGeometry(u[r][0],u[r][1],n),i!==null)&&(f=i.left,e=i.top,o=i.width,s=i.height,n.fill&&t.fillRect(f,e,o,s),h&&(t.save(),t.fillStyle="rgba(0,0,0,0.05)",t.fillRect(f+h,e+h,o,s),t.restore()),n.lineWidth&&t.strokeRect(f,e,o,s))},translate:function(n,t){t&&(n.rotate(-Math.PI/2),n.scale(-1,1))},getBarGeometry:function(n,t,i){var o=i.horizontal,u=i.barWidth,k=i.centered,c=i.stacked?this.stack:!1,b=i.lineWidth,f=k?u/2:0,l=o?i.yScale:i.xScale,a=o?i.xScale:i.yScale,r=o?t:n,s=o?n:t,e=0,v,y,p,w,h;return i.grouped&&(this.current/this.groups,r=r-f,u=u/this.groups,f=u/2,r=r+u*this.current-f),c&&(v=s>0?c.positive:c.negative,e=v[r]||e,v[r]=e+s),y=l(r-f),p=l(r+u-f),w=a(s+e),h=a(e),h<0&&(h=0),n===null||t===null?null:{x:r,y:s,xScale:l,yScale:a,top:w,left:Math.min(y,p)-b/2,width:Math.abs(p-y)-b,height:h-w}},hit:function(n){for(var i=n.data,o=n.args,s=o[0],r=o[1],h=n.xInverse(s.relX),c=n.yInverse(s.relY),e=this.getBarGeometry(h,c,n),l=e.width/2,a=e.left,u=e.y,f,t=i.length;t--;)f=this.getBarGeometry(i[t][0],i[t][1],n),(u>0&&u<f.y||u<0&&u>f.y)&&Math.abs(a-f.left)<l&&(r.x=i[t][0],r.y=i[t][1],r.index=t,r.seriesIndex=n.index)},drawHit:function(n){var t=n.context,f=n.args,i=this.getBarGeometry(f.x,f.y,n),r=i.left,u=i.top,e=i.width,o=i.height;t.save();t.strokeStyle=n.color;t.lineWidth=n.lineWidth;this.translate(t,n.horizontal);t.beginPath();t.moveTo(r,u+o);t.lineTo(r,u);t.lineTo(r+e,u);t.lineTo(r+e,u+o);n.fill&&(t.fillStyle=n.fillStyle,t.fill());t.stroke();t.closePath();t.restore()},clearHit:function(n){var t=n.context,u=n.args,i=this.getBarGeometry(u.x,u.y,n),o=i.left,s=i.width,f=i.top,e=i.height,r=2*n.lineWidth;t.save();this.translate(t,n.horizontal);t.clearRect(o-r,Math.min(f,f+e)-r,s+2*r,Math.abs(e)+2*r);t.restore()},extendXRange:function(n,t,i,r){this._extendRange(n,t,i,r);this.groups=this.groups+1||1;this.current=0},extendYRange:function(n,t,i,r){this._extendRange(n,t,i,r)},_extendRange:function(n,t,i){var a=n.options.max;if(!_.isNumber(a)&&!_.isString(a)){var f=n.min,r=n.max,o=i.horizontal,u=n.orientation,s=this.positiveSums||{},h=this.negativeSums||{},e,c,l;if((u==1&&!o||u==-1&&o)&&i.centered&&(r=Math.max(n.datamax+i.barWidth,r),f=Math.min(n.datamin-i.barWidth,f)),i.stacked&&(u==1&&o||u==-1&&!o))for(l=t.length;l--;)e=t[l][u==1?1:0]+"",c=t[l][u==1?0:1],c>0?(s[e]=(s[e]||0)+c,r=Math.max(r,s[e])):(h[e]=(h[e]||0)+c,f=Math.min(f,h[e]));(u==1&&o||u==-1&&!o)&&i.topPadding&&(n.max===n.datamax||i.stacked&&this.stackMax!==r)&&(r+=i.topPadding*(r-f));this.stackMin=f;this.stackMax=r;this.negativeSums=h;this.positiveSums=s;n.max=r;n.min=f}}});Flotr.addType("bubbles",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,baseRadius:2},draw:function(n){var t=n.context,i=n.shadowSize;t.save();t.lineWidth=n.lineWidth;t.fillStyle="rgba(0,0,0,0.05)";t.strokeStyle="rgba(0,0,0,0.05)";this.plot(n,i/2);t.strokeStyle="rgba(0,0,0,0.1)";this.plot(n,i/4);t.strokeStyle=n.color;t.fillStyle=n.fillStyle;this.plot(n);t.restore()},plot:function(n,t){var f=n.data,i=n.context,r,u;for(t=t||0,u=0;u<f.length;++u)r=this.getGeometry(f[u],n),i.beginPath(),i.arc(r.x+t,r.y+t,r.z,0,2*Math.PI,!0),i.stroke(),n.fill&&i.fill(),i.closePath()},getGeometry:function(n,t){return{x:t.xScale(n[0]),y:t.yScale(n[1]),z:n[2]*t.baseRadius}},hit:function(n){var u=n.data,o=n.args,s=o[0],t=o[1],c=s.relX,l=s.relY,h,r,f,e;for(t.best=t.best||Number.MAX_VALUE,i=u.length;i--;)r=this.getGeometry(u[i],n),f=r.x-c,e=r.y-l,h=Math.sqrt(f*f+e*e),h<r.z&&r.z<t.best&&(t.x=u[i][0],t.y=u[i][1],t.index=i,t.seriesIndex=n.index,t.best=r.z)},drawHit:function(n){var t=n.context,i=this.getGeometry(n.data[n.args.index],n);t.save();t.lineWidth=n.lineWidth;t.fillStyle=n.fillStyle;t.strokeStyle=n.color;t.beginPath();t.arc(i.x,i.y,i.z,0,2*Math.PI,!0);t.fill();t.stroke();t.closePath();t.restore()},clearHit:function(n){var i=n.context,r=this.getGeometry(n.data[n.args.index],n),t=r.z+n.lineWidth;i.save();i.clearRect(r.x-t,r.y-t,2*t,2*t);i.restore()}});Flotr.addType("candles",{options:{show:!1,lineWidth:1,wickLineWidth:1,candleWidth:.6,fill:!0,upFillColor:"#00A8F0",downFillColor:"#CB4B4B",fillOpacity:.5,barcharts:!1},draw:function(n){var t=n.context;t.save();t.lineJoin="miter";t.lineCap="butt";t.lineWidth=n.wickLineWidth||n.lineWidth;this.plot(n);t.restore()},plot:function(n){var p=n.data,t=n.context,g=n.xScale,v=n.yScale,e=n.candleWidth/2,nt=n.shadowSize,f=n.lineWidth,tt=n.wickLineWidth,w=tt%2/2,b,o,i,s,c,it,rt,l,r,h,k,d,a,u,y;if(!(p.length<1))for(y=0;y<p.length;y++)o=p[y],i=o[0],c=o[1],it=o[2],rt=o[3],l=o[4],r=g(i-e),h=g(i+e),k=v(rt),d=v(it),a=v(Math.min(c,l)),u=v(Math.max(c,l)),b=n[c>l?"downFillColor":"upFillColor"],n.fill&&!n.barcharts&&(t.fillStyle="rgba(0,0,0,0.05)",t.fillRect(r+nt,u+nt,h-r,a-u),t.save(),t.globalAlpha=n.fillOpacity,t.fillStyle=b,t.fillRect(r,u+f,h-r,a-u),t.restore()),(f||tt)&&(i=Math.floor((r+h)/2)+w,t.strokeStyle=b,t.beginPath(),n.barcharts?(t.moveTo(i,Math.floor(d+e)),t.lineTo(i,Math.floor(k+e)),s=Math.floor(c+e)+.5,t.moveTo(Math.floor(r)+w,s),t.lineTo(i,s),s=Math.floor(l+e)+.5,t.moveTo(Math.floor(h)+w,s),t.lineTo(i,s)):(t.strokeRect(r,u+f,h-r,a-u),t.moveTo(i,Math.floor(u+f)),t.lineTo(i,Math.floor(d+f)),t.moveTo(i,Math.floor(a+f)),t.lineTo(i,Math.floor(k+f))),t.closePath(),t.stroke())},extendXRange:function(n){n.options.max===null&&(n.max=Math.max(n.datamax+.5,n.max),n.min=Math.min(n.datamin-.5,n.min))}});Flotr.addType("gantt",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(n){var t=this.ctx,i=n.gantt.barWidth,u=Math.min(n.gantt.lineWidth,i),r;t.save();t.translate(this.plotOffset.left,this.plotOffset.top);t.lineJoin="miter";t.lineWidth=u;t.strokeStyle=n.color;t.save();this.gantt.plotShadows(n,i,0,n.gantt.fill);t.restore();n.gantt.fill&&(r=n.gantt.fillColor||n.color,t.fillStyle=this.processColor(r,{opacity:n.gantt.fillOpacity}));this.gantt.plot(n,i,0,n.gantt.fill);t.restore()},plot:function(n,t,i,r){var a=n.data;if(!(a.length<1))for(var u=n.xaxis,f=n.yaxis,e=this.ctx,l=0;l<a.length;l++){var w=a[l][0],y=a[l][1],b=a[l][2],p=!0,v=!0,k=!0;if(y!==null&&b!==null){var o=y,s=y+b,h=w-(n.gantt.centered?t/2:0),c=w+t-(n.gantt.centered?t/2:0);s<u.min||o>u.max||c<f.min||h>f.max||(o<u.min&&(o=u.min,p=!1),s>u.max&&(s=u.max,u.lastSerie!=n&&(v=!1)),h<f.min&&(h=f.min),c>f.max&&(c=f.max,f.lastSerie!=n&&(v=!1)),r&&(e.beginPath(),e.moveTo(u.d2p(o),f.d2p(h)+i),e.lineTo(u.d2p(o),f.d2p(c)+i),e.lineTo(u.d2p(s),f.d2p(c)+i),e.lineTo(u.d2p(s),f.d2p(h)+i),e.fill(),e.closePath()),n.gantt.lineWidth&&(p||k||v)&&(e.beginPath(),e.moveTo(u.d2p(o),f.d2p(h)+i),e[p?"lineTo":"moveTo"](u.d2p(o),f.d2p(c)+i),e[v?"lineTo":"moveTo"](u.d2p(s),f.d2p(c)+i),e[k?"lineTo":"moveTo"](u.d2p(s),f.d2p(h)+i),e.stroke(),e.closePath()))}}},plotShadows:function(n,t){var e=n.data,p,w;if(!(e.length<1))for(var a,l,v,i=n.xaxis,r=n.yaxis,y=this.ctx,f=this.options.shadowSize,u=0;u<e.length;u++)if(a=e[u][0],l=e[u][1],v=e[u][2],l!==null&&v!==null){var o=l,s=l+v,h=a-(n.gantt.centered?t/2:0),c=a+t-(n.gantt.centered?t/2:0);s<i.min||o>i.max||c<r.min||h>r.max||(o<i.min&&(o=i.min),s>i.max&&(s=i.max),h<r.min&&(h=r.min),c>r.max&&(c=r.max),p=i.d2p(s)-i.d2p(o)-(i.d2p(s)+f<=this.plotWidth?0:f),w=r.d2p(h)-r.d2p(c)-(r.d2p(h)+f<=this.plotHeight?0:f),y.fillStyle="rgba(0,0,0,0.05)",y.fillRect(Math.min(i.d2p(o)+f,this.plotWidth),Math.min(r.d2p(c)+f,this.plotHeight),p,w))}},extendXRange:function(n){if(n.options.max===null){for(var s=n.min,f=n.max,t,i,e,u={},o=null,r=0;r<this.series.length;++r)if(i=this.series[r],e=i.gantt,e.show&&i.xaxis==n){for(t=0;t<i.data.length;t++)e.show&&(y=i.data[t][0]+"",u[y]=Math.max(u[y]||0,i.data[t][1]+i.data[t][2]),o=i);for(t in u)f=Math.max(u[t],f)}n.lastSerie=o;n.max=f;n.min=s}},extendYRange:function(n){var u,o;if(n.options.max===null){for(var t=Number.MIN_VALUE,r=Number.MAX_VALUE,f,i,e,s=0;s<this.series.length;++s)if(i=this.series[s],e=i.gantt,e.show&&!i.hide&&i.yaxis==n){for(u=Number.MIN_VALUE,o=Number.MAX_VALUE,f=0;f<i.data.length;f++)u=Math.max(u,i.data[f][0]),o=Math.min(o,i.data[f][0]);e.centered?(t=Math.max(u+.5,t),r=Math.min(o-.5,r)):(t=Math.max(u+1,t),r=Math.min(o,r));e.barWidth+u>t&&(t=n.max+e.barWidth)}n.lastSerie=null;n.max=t;n.min=r;n.tickSize=Flotr.getTickSize(n.options.noTicks,r,t,n.options.tickDecimals)}}}),function(){function n(n){return typeof n=="object"&&n.constructor&&(Image?!0:n.constructor===Image)}Flotr.defaultMarkerFormatter=function(n){return Math.round(n.y*100)/100+""};Flotr.addType("markers",{options:{show:!1,lineWidth:1,color:"#000000",fill:!1,fillColor:"#FFFFFF",fillOpacity:.4,stroke:!1,position:"ct",verticalMargin:0,labelFormatter:Flotr.defaultMarkerFormatter,fontSize:Flotr.defaultOptions.fontSize,stacked:!1,stackingType:"b",horizontal:!1},stack:{positive:[],negative:[],values:[]},draw:function(n){function a(n,t){return s=r.negative[n]||0,o=r.positive[n]||0,t>0?(r.positive[n]=s+t,s+t):(r.negative[n]=o+t,o+t)}var e=n.data,u=n.context,r=n.stacked?n.stack:!1,c=n.stackingType,o,s,h,f,i,t,l;for(u.save(),u.lineJoin="round",u.lineWidth=n.lineWidth,u.strokeStyle="rgba(0,0,0,0.5)",u.fillStyle=n.fillStyle,f=0;f<e.length;++f)i=e[f][0],t=e[f][1],r&&(c=="b"?n.horizontal?t=a(t,i):i=a(i,t):c=="a"&&(h=r.values[i]||0,r.values[i]=h+t,t=h+t)),l=n.labelFormatter({x:i,y:t,index:f,data:e}),this.plot(n.xScale(i),n.yScale(t),l,n);u.restore()},plot:function(t,i,r,u){var f=u.context;if(n(r)&&!r.complete)throw"Marker image not loaded.";else this._plot(t,i,r,u)},_plot:function(t,i,r,u){var h=u.context,o=2,s=t,e=i,f;f=n(r)?{height:r.height,width:r.width}:u.text.canvas(r);f.width=Math.floor(f.width+o*2);f.height=Math.floor(f.height+o*2);u.position.indexOf("c")!=-1?s-=f.width/2+o:u.position.indexOf("l")!=-1&&(s-=f.width);u.position.indexOf("m")!=-1?e-=f.height/2+o:u.position.indexOf("t")!=-1?e-=f.height+u.verticalMargin:e+=u.verticalMargin;s=Math.floor(s)+.5;e=Math.floor(e)+.5;u.fill&&h.fillRect(s,e,f.width,f.height);u.stroke&&h.strokeRect(s,e,f.width,f.height);n(r)?h.drawImage(r,s+o,e+o):Flotr.drawText(h,r,s+o,e+o,{textBaseline:"top",textAlign:"left",size:u.fontSize,color:u.color})}})}(),function(){var n=Flotr._;Flotr.defaultPieLabelFormatter=function(n,t){return(100*t/n).toFixed(2)+"%"};Flotr.addType("pie",{options:{show:!1,lineWidth:1,fill:!0,fillColor:null,fillOpacity:.6,explode:6,sizeRatio:.6,startAngle:Math.PI/4,labelFormatter:Flotr.defaultPieLabelFormatter,pie3D:!1,pie3DviewAngle:Math.PI/2*.8,pie3DspliceThickness:20,epsilon:.1},draw:function(n){var ft=n.data,t=n.context,r=t.canvas,et=n.lineWidth,a=n.shadowSize,k=n.sizeRatio,d=n.height,g=n.width,u=n.explode,ot=n.color,nt=n.fill,st=n.fillStyle,v=Math.min(r.width,r.height)*k/2,tt=ft[0][1],it=[],rt=Math.PI*2*tt/this.total,i=this.startAngle||2*Math.PI*n.startAngle,f=i+rt,e=i+rt/2,y=n.labelFormatter(this.total,tt),ut=u+v+4,o=Math.cos(e)*ut,s=Math.sin(e)*ut,p=o<0?"right":"left",w=s>0?"top":"bottom",h,c,l,b;t.save();t.translate(g/2,d/2);t.scale(1,1);c=Math.cos(e)*u;l=Math.sin(e)*u;a>0&&(this.plotSlice(c+a,l+a,v,i,f,t),nt&&(t.fillStyle="rgba(0,0,0,0.1)",t.fill()));this.plotSlice(c,l,v,i,f,t);nt&&(t.fillStyle=st,t.fill());t.lineWidth=et;t.strokeStyle=ot;t.stroke();h={size:n.fontSize*1.2,color:n.fontColor,weight:1.5};y&&(n.htmlText||!n.textEnabled?(divStyle="position:absolute;"+w+":"+(d/2+(w==="top"?s:-s))+"px;",divStyle+=p+":"+(g/2+(p==="right"?-o:o))+"px;",it.push('<div style="',divStyle,'" class="flotr-grid-label">',y,"<\/div>")):(h.textAlign=p,h.textBaseline=w,Flotr.drawText(t,y,o,s,h)));(n.htmlText||!n.textEnabled)&&(b=Flotr.DOM.node('<div style="color:'+n.fontColor+'" class="flotr-labels"><\/div>'),Flotr.DOM.insert(b,it.join("")),Flotr.DOM.insert(n.element,b));t.restore();this.startAngle=f;this.slices=this.slices||[];this.slices.push({radius:Math.min(r.width,r.height)*k/2,x:c,y:l,explode:u,start:i,end:f})},plotSlice:function(n,t,i,r,u,f){f.beginPath();f.moveTo(n,t);f.arc(n,t,i,r,u,!1);f.lineTo(n,t);f.closePath()},hit:function(n){var s=n.data[0],c=n.args,l=n.index,a=c[0],r=c[1],t=this.slices[l],f=a.relX-n.width/2,o=a.relY-n.height/2,v=Math.sqrt(f*f+o*o),i=Math.atan(o/f),h=Math.PI*2,y=t.explode||n.explode,u=t.start%h,e=t.end%h,p=n.epsilon;f<0?i+=Math.PI:f>0&&o<0&&(i+=h);v<t.radius+y&&v>y&&(i>u&&i<e||u>e&&(i<e||i>u)||u===e&&(t.start===t.end&&Math.abs(i-u)<p||t.start!==t.end&&Math.abs(i-u)>p))&&(r.x=s[0],r.y=s[1],r.sAngle=u,r.eAngle=e,r.index=0,r.seriesIndex=l,r.fraction=s[1]/this.total)},drawHit:function(n){var t=n.context,i=this.slices[n.args.seriesIndex];t.save();t.translate(n.width/2,n.height/2);this.plotSlice(i.x,i.y,i.radius,i.start,i.end,t);t.stroke();t.restore()},clearHit:function(n){var t=n.context,r=this.slices[n.args.seriesIndex],u=2*n.lineWidth,i=r.radius+u;t.save();t.translate(n.width/2,n.height/2);t.clearRect(r.x-i,r.y-i,2*i+u,2*i+u);t.restore()},extendYRange:function(n,t){this.total=(this.total||0)+t[0][1]}})}();Flotr.addType("points",{options:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#FFFFFF",fillOpacity:1,hitRadius:null},draw:function(n){var t=n.context,r=n.lineWidth,i=n.shadowSize;t.save();i>0&&(t.lineWidth=i/2,t.strokeStyle="rgba(0,0,0,0.1)",this.plot(n,i/2+t.lineWidth/2),t.strokeStyle="rgba(0,0,0,0.2)",this.plot(n,t.lineWidth/2));t.lineWidth=n.lineWidth;t.strokeStyle=n.color;n.fill&&(t.fillStyle=n.fillStyle);this.plot(n);t.restore()},plot:function(n,t){for(var e=n.data,r=n.context,o=n.xScale,s=n.yScale,f,i,u=e.length-1;u>-1;--u)(i=e[u][1],i!==null)&&((f=o(e[u][0]),i=s(i),f<0||f>n.width||i<0||i>n.height)||(r.beginPath(),t?r.arc(f,i+t,n.radius,0,Math.PI,!1):(r.arc(f,i,n.radius,0,2*Math.PI,!0),n.fill&&r.fill()),r.stroke(),r.closePath()))}});Flotr.addType("radar",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,radiusRatio:.9},draw:function(n){var t=n.context,i=n.shadowSize;t.save();t.translate(n.width/2,n.height/2);t.lineWidth=n.lineWidth;t.fillStyle="rgba(0,0,0,0.05)";t.strokeStyle="rgba(0,0,0,0.05)";this.plot(n,i/2);t.strokeStyle="rgba(0,0,0,0.1)";this.plot(n,i/4);t.strokeStyle=n.color;t.fillStyle=n.fillStyle;this.plot(n);t.restore()},plot:function(n,t){var u=n.data,r=n.context,e=Math.min(n.height,n.width)*n.radiusRatio/2,o=2*Math.PI/u.length,s=-Math.PI/2,i,f;for(t=t||0,r.beginPath(),i=0;i<u.length;++i)f=u[i][1]/this.max,r[i===0?"moveTo":"lineTo"](Math.cos(i*o+s)*e*f+t,Math.sin(i*o+s)*e*f+t);r.closePath();n.fill&&r.fill();r.stroke()},extendYRange:function(n){this.max=Math.max(n.max,this.max||-Number.MAX_VALUE)}});Flotr.addType("timeline",{options:{show:!1,lineWidth:1,barWidth:.2,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(n){var t=n.context;t.save();t.lineJoin="miter";t.lineWidth=n.lineWidth;t.strokeStyle=n.color;t.fillStyle=n.fillStyle;this.plot(n);t.restore()},plot:function(n){var f=n.data,t=n.context,i=n.xScale,r=n.yScale,e=n.barWidth,u=n.lineWidth;Flotr._.each(f,function(n){var o=n[0],s=n[1],y=n[2],p=e,h=Math.ceil(i(o)),c=Math.ceil(i(o+y))-h,l=Math.round(r(s)),f=Math.round(r(s-p))-l,a=h-u/2,v=Math.round(l-f/2)-u/2;t.strokeRect(a,v,c,f);t.fillRect(a,v,c,f)})},extendRange:function(n){var f=n.data,t=n.xaxis,i=n.yaxis,r=n.timeline.barWidth,u;t.options.min===null&&(t.min=t.datamin-r/2);t.options.max===null&&(u=t.max,Flotr._.each(f,function(n){u=Math.max(u,n[0]+n[2])},this),t.max=u+r/2);i.options.min===null&&(i.min=i.datamin-r);i.options.min===null&&(i.max=i.datamax+r)}}),function(){var n=Flotr.DOM;Flotr.addPlugin("crosshair",{options:{mode:null,color:"#FF0000",hideCursor:!0},callbacks:{"flotr:mousemove":function(n,t){this.options.crosshair.mode&&(this.crosshair.clearCrosshair(),this.crosshair.drawCrosshair(t))}},drawCrosshair:function(t){var i=this.octx,u=this.options.crosshair,r=this.plotOffset,f=r.left+Math.round(t.relX)+.5,e=r.top+Math.round(t.relY)+.5;if(t.relX<0||t.relY<0||t.relX>this.plotWidth||t.relY>this.plotHeight){this.el.style.cursor=null;n.removeClass(this.el,"flotr-crosshair");return}u.hideCursor&&(this.el.style.cursor="none",n.addClass(this.el,"flotr-crosshair"));i.save();i.strokeStyle=u.color;i.lineWidth=1;i.beginPath();u.mode.indexOf("x")!=-1&&(i.moveTo(f,r.top),i.lineTo(f,r.top+this.plotHeight));u.mode.indexOf("y")!=-1&&(i.moveTo(r.left,e),i.lineTo(r.left+this.plotWidth,e));i.stroke();i.restore()},clearCrosshair:function(){var n=this.plotOffset,t=this.lastMousePos,i=this.octx;t&&(i.clearRect(Math.round(t.relX)+n.left,n.top,1,this.plotHeight+1),i.clearRect(n.left,Math.round(t.relY)+n.top,this.plotWidth+1,1))}})}(),function(){function i(n,t){var r="image/"+n,u=t.toDataURL(r),i=new Image;return i.src=u,i}var n=Flotr.DOM,t=Flotr._;Flotr.addPlugin("download",{saveImage:function(r,u,f,e){var o=null;if(Flotr.isIE&&Flotr.isIE<9)return o="<html><body>"+this.canvas.firstChild.innerHTML+"<\/body><\/html>",window.open().document.write(o);if(r==="jpeg"||r==="png")if(o=i(r,this.canvas,u,f),t.isElement(o)&&e)this.download.restoreCanvas(),n.hide(this.canvas),n.hide(this.overlay),n.setStyles({position:"absolute"}),n.insert(this.el,o),this.saveImageElement=o;else return window.open(o.src)},restoreCanvas:function(){n.show(this.canvas);n.show(this.overlay);this.saveImageElement&&this.el.removeChild(this.saveImageElement);this.saveImageElement=null}})}(),function(){var t=Flotr.EventAdapter,n=Flotr._;Flotr.addPlugin("graphGrid",{callbacks:{"flotr:beforedraw":function(){this.graphGrid.drawGrid()},"flotr:afterdraw":function(){this.graphGrid.drawOutline()}},drawGrid:function(){function d(n){for(a=0;a<n.length;++a){var t=n[a].v/r.max;for(f=0;f<=k;++f)i[f===0?"moveTo":"lineTo"](Math.cos(f*p+w)*y*t,Math.sin(f*p+w)*y*t)}}function v(t,f){n.each(n.pluck(t,"v"),function(n){n<=r.min||n>=r.max||(n==r.min||n==r.max)&&u.outlineWidth||f(Math.floor(r.d2p(n))+i.lineWidth/2)})}function g(n){i.moveTo(n,0);i.lineTo(n,e)}function nt(n){i.moveTo(0,n);i.lineTo(o,n)}var i=this.ctx,s=this.options,u=s.grid,h=u.verticalLines,c=u.horizontalLines,b=u.minorVerticalLines,l=u.minorHorizontalLines,e=this.plotHeight,o=this.plotWidth,r,a,f;if((h||b||c||l)&&t.fire(this.el,"flotr:beforegrid",[this.axes.x,this.axes.y,s,this]),i.save(),i.lineWidth=1,i.strokeStyle=u.tickColor,u.circular){i.translate(this.plotOffset.left+o/2,this.plotOffset.top+e/2);var y=Math.min(e,o)*s.radar.radiusRatio/2,k=this.axes.x.ticks.length,p=2*(Math.PI/k),w=-Math.PI/2;i.beginPath();r=this.axes.y;c&&d(r.ticks);l&&d(r.minorTicks);h&&n.times(k,function(n){i.moveTo(0,0);i.lineTo(Math.cos(n*p+w)*y,Math.sin(n*p+w)*y)});i.stroke()}else i.translate(this.plotOffset.left,this.plotOffset.top),u.backgroundColor&&(i.fillStyle=this.processColor(u.backgroundColor,{x1:0,y1:0,x2:o,y2:e}),i.fillRect(0,0,o,e)),i.beginPath(),r=this.axes.x,h&&v(r.ticks,g),b&&v(r.minorTicks,g),r=this.axes.y,c&&v(r.ticks,nt),l&&v(r.minorTicks,nt),i.stroke();i.restore();(h||b||c||l)&&t.fire(this.el,"flotr:aftergrid",[this.axes.x,this.axes.y,s,this])},drawOutline:function(){var s=this,y=s.options,t=y.grid,c=t.outline,n=s.ctx,r=t.backgroundImage,l=s.plotOffset,p=l.left,w=l.top,u=s.plotWidth,f=s.plotHeight,e,b,k,d;if(t.outlineWidth){if(n.save(),t.circular){n.translate(p+u/2,w+f/2);var g=Math.min(f,u)*y.radar.radiusRatio/2,nt=this.axes.x.ticks.length,tt=2*(Math.PI/nt),it=-Math.PI/2;for(n.beginPath(),n.lineWidth=t.outlineWidth,n.strokeStyle=t.color,n.lineJoin="round",i=0;i<=nt;++i)n[i===0?"moveTo":"lineTo"](Math.cos(i*tt+it)*g,Math.sin(i*tt+it)*g);n.stroke()}else{n.translate(p,w);var h=t.outlineWidth,o=.5-h+(h+1)%2/2,a="lineTo",v="moveTo";n.lineWidth=h;n.strokeStyle=t.color;n.lineJoin="miter";n.beginPath();n.moveTo(o,o);u=u-h/2%1;f=f+h/2;n[c.indexOf("n")!==-1?a:v](u,o);n[c.indexOf("e")!==-1?a:v](u,f);n[c.indexOf("s")!==-1?a:v](o,f);n[c.indexOf("w")!==-1?a:v](o,o);n.stroke();n.closePath()}n.restore();r&&(b=r.src||r,k=(parseInt(r.left,10)||0)+l.left,d=(parseInt(r.top,10)||0)+l.top,e=new Image,e.onload=function(){n.save();r.alpha&&(n.globalAlpha=r.alpha);n.globalCompositeOperation="destination-over";n.drawImage(e,0,0,e.width,e.height,k,d,u,f);n.restore()},e.src=b)}}})}(),function(){var t=Flotr.DOM,n=Flotr._,i=Flotr,r="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;";Flotr.addPlugin("hit",{callbacks:{"flotr:mousemove":function(n,t){this.hit.track(t)},"flotr:click":function(t){var i=this.hit.track(t);n.defaults(t,i)},"flotr:mouseout":function(){this.hit.clearHit()},"flotr:destroy":function(){this.mouseTrack=null}},track:function(t){if(this.options.mouse.track||n.any(this.series,function(n){return n.mouse&&n.mouse.track}))return this.hit.hit(t)},executeOnType:function(t,r,u){function o(t,o){n.each(n.keys(i.graphTypes),function(n){t[n]&&t[n].show&&this[n][r]&&(f=this.getOptions(t,n),f.fill=!!t.mouse.fillColor,f.fillStyle=this.processColor(t.mouse.fillColor||"#ffffff",{opacity:t.mouse.fillOpacity}),f.color=t.mouse.lineColor,f.context=this.octx,f.index=o,u&&(f.args=u),this[n][r].call(this[n],f),e=!0)},this)}var e=!1,f;return n.isArray(t)||(t=[t]),n.each(t,o,this),e},drawHit:function(n){var t=this.octx,i=n.series,r,u;i.mouse.lineColor&&(t.save(),t.lineWidth=i.points?i.points.lineWidth:1,t.strokeStyle=i.mouse.lineColor,t.fillStyle=this.processColor(i.mouse.fillColor||"#ffffff",{opacity:i.mouse.fillOpacity}),t.translate(this.plotOffset.left,this.plotOffset.top),this.hit.executeOnType(i,"drawHit",n)||(r=n.xaxis,u=n.yaxis,t.beginPath(),t.arc(r.d2p(n.x),u.d2p(n.y),i.points.hitRadius||i.points.radius||i.mouse.radius,0,2*Math.PI,!0),t.fill(),t.stroke(),t.closePath()),t.restore(),this.clip(t));this.prevHit=n},clearHit:function(){var n=this.prevHit,r=this.octx,u=this.plotOffset,i,f;r.save();r.translate(u.left,u.top);n&&(this.hit.executeOnType(n.series,"clearHit",this.prevHit)||(i=n.series,f=i.points?i.points.lineWidth:1,offset=(i.points.hitRadius||i.points.radius||i.mouse.radius)+f,r.clearRect(n.xaxis.d2p(n.x)-offset,n.yaxis.d2p(n.y)-offset,offset*2,offset*2)),t.hide(this.mouseTrack),this.prevHit=null);r.restore()},hit:function(t){var f=this.options,e=this.prevHit,u,o,s,r,h,c,i;if(this.series.length!==0)return i={relX:t.relX,relY:t.relY,absX:t.absX,absY:t.absY},f.mouse.trackY&&!f.mouse.trackAll&&this.hit.executeOnType(this.series,"hit",[t,i])&&!n.isUndefined(i.seriesIndex)?(r=this.series[i.seriesIndex],i.series=r,i.mouse=r.mouse,i.xaxis=r.xaxis,i.yaxis=r.yaxis):(u=this.hit.closest(t),u&&(u=f.mouse.trackY?u.point:u.x,s=u.seriesIndex,r=this.series[s],h=r.xaxis,c=r.yaxis,o=2*r.mouse.sensibility,(f.mouse.trackAll||u.distanceX<o/h.scale&&(!f.mouse.trackY||u.distanceY<o/c.scale))&&(i.series=r,i.xaxis=r.xaxis,i.yaxis=r.yaxis,i.mouse=r.mouse,i.x=u.x,i.y=u.y,i.dist=u.distance,i.index=u.dataIndex,i.seriesIndex=s))),e&&e.index===i.index&&e.seriesIndex===i.seriesIndex||(this.hit.clearHit(),i.series&&i.mouse&&i.mouse.track&&(this.hit.drawMouseTrack(i),this.hit.drawHit(i),Flotr.EventAdapter.fire(this.el,"flotr:hit",[i,this]))),i},closest:function(n){function k(n){n.distance=o;n.distanceX=i;n.distanceY=s;n.seriesIndex=u;n.dataIndex=f;n.x=r;n.y=h;p=!0}for(var c=this.series,nt=this.options,d=n.relX,g=n.relY,l=Number.MAX_VALUE,a=Number.MAX_VALUE,v={},y={},p=!1,t,e,o,i,s,w,b,r,h,f,u=0;u<c.length;u++)for(t=c[u],e=t.data,w=t.xaxis.p2d(d),b=t.yaxis.p2d(g),f=e.length;f--;)(r=e[f][0],h=e[f][1],r!==null&&h!==null)&&(r<t.xaxis.min||r>t.xaxis.max||(i=Math.abs(r-w),s=Math.abs(h-b),o=i*i+s*s,o<l&&(l=o,k(v)),i<a&&(a=i,k(y))));return p?{point:v,x:y}:!1},drawMouseTrack:function(n){var f="",v=n.series,e=n.mouse.position,u=n.mouse.margin,o=n.x,s=n.y,y=r,i=this.mouseTrack,a=this.plotOffset,h=a.left,k=a.right,d=a.bottom,c=a.top,l=n.mouse.trackDecimals,g=this.options;if(i||(i=t.node('<div class="flotr-mouse-value"><\/div>'),this.mouseTrack=i,t.insert(this.el,i)),n.mouse.relative)if(v.pie&&v.pie.show){var p={x:this.plotWidth/2,y:this.plotHeight/2},w=Math.min(this.canvasWidth,this.canvasHeight)*v.pie.sizeRatio/2,b=n.sAngle<n.eAngle?(n.sAngle+n.eAngle)/2:(n.sAngle+n.eAngle+2*Math.PI)/2;f+="bottom:"+(u-c-p.y-Math.sin(b)*w/2+this.canvasHeight)+"px;top:auto;";f+="left:"+(u+h+p.x+Math.cos(b)*w/2)+"px;right:auto;"}else f+=/n/.test(e)?"bottom:"+(u-c-n.yaxis.d2p(n.y)+this.canvasHeight)+"px;top:auto;":"top:"+(u+c+n.yaxis.d2p(n.y))+"px;bottom:auto;",f+=/w/.test(e)?"right:"+(u-h-n.xaxis.d2p(n.x)+this.canvasWidth)+"px;left:auto;":"left:"+(u+h+n.xaxis.d2p(n.x))+"px;right:auto;";else e.charAt(0)=="n"?f+="top:"+(u+c)+"px;bottom:auto;":e.charAt(0)=="s"&&(f+="bottom:"+(u+d)+"px;top:auto;"),e.charAt(1)=="e"?f+="right:"+(u+k)+"px;left:auto;":e.charAt(1)=="w"&&(f+="left:"+(u+h)+"px;right:auto;");y+=f;i.style.cssText=y;(!l||l<0)&&(l=0);o&&o.toFixed&&(o=o.toFixed(l));s&&s.toFixed&&(s=s.toFixed(l));i.innerHTML=n.mouse.trackFormatter({x:o,y:s,series:n.series,index:n.index,nearest:n,fraction:n.fraction});t.show(i);n.mouse.relative&&(/[ew]/.test(e)?/[ns]/.test(e)||(i.style.top=c+n.yaxis.d2p(n.y)-t.size(i).height/2+"px"):i.style.left=h+n.xaxis.d2p(n.x)-t.size(i).width/2+"px")}})}(),function(){function r(n){return n.which?n.which===1:n.button===0||n.button===1}function n(n,t){return Math.min(Math.max(0,n),t.plotWidth-1)}function t(n,t){return Math.min(Math.max(0,n),t.plotHeight)}var f=Flotr.DOM,u=Flotr.EventAdapter,i=Flotr._;Flotr.addPlugin("selection",{options:{pinchOnly:null,mode:null,color:"#B6D9FF",fps:20},callbacks:{"flotr:mouseup":function(n){var i=this.options.selection,t=this.selection,r=this.getEventPosition(n);i&&i.mode&&(t.interval&&clearInterval(t.interval),this.multitouches?t.updateSelection():i.pinchOnly||t.setSelectionPos(t.selection.second,r),t.clearSelection(),t.selecting&&t.selectionIsSane()&&(t.drawSelection(),t.fireSelectEvent(),this.ignoreClick=!0))},"flotr:mousedown":function(n){var u=this.options.selection,t=this.selection,f=this.getEventPosition(n);u&&u.mode&&u.mode&&(r(n)||!i.isUndefined(n.touches))&&(u.pinchOnly||t.setSelectionPos(t.selection.first,f),t.interval&&clearInterval(t.interval),this.lastMousePos.pageX=null,t.selecting=!1,t.interval=setInterval(i.bind(t.updateSelection,this),1e3/u.fps))},"flotr:destroy":function(){clearInterval(this.selection.interval)}},getArea:function(){var n=this.selection.selection,t=this.axes,e=n.first,o=n.second,i,r,u,f;return i=t.x.p2d(n.first.x),r=t.x.p2d(n.second.x),u=t.y.p2d(n.first.y),f=t.y.p2d(n.second.y),{x1:Math.min(i,r),y1:Math.min(u,f),x2:Math.max(i,r),y2:Math.max(u,f),xfirst:i,xsecond:r,yfirst:u,ysecond:f}},selection:{first:{x:-1,y:-1},second:{x:-1,y:-1}},prevSelection:null,interval:null,fireSelectEvent:function(n){var t=this.selection.getArea();n=n||"select";t.selection=this.selection.selection;u.fire(this.el,"flotr:"+n,[t,this])},setSelection:function(i,r){var h=this.options,o=this.axes.x,s=this.axes.y,c=s.scale,l=o.scale,u=h.selection.mode.indexOf("x")!=-1,f=h.selection.mode.indexOf("y")!=-1,e=this.selection.selection;this.selection.clearSelection();e.first.y=t(u&&!f?0:(s.max-i.y1)*c,this);e.second.y=t(u&&!f?this.plotHeight-1:(s.max-i.y2)*c,this);e.first.x=n(f&&!u?0:(i.x1-o.min)*l,this);e.second.x=n(f&&!u?this.plotWidth:(i.x2-o.min)*l,this);this.selection.drawSelection();r||this.selection.fireSelectEvent()},setSelectionPos:function(i,r){var u=this.options.selection.mode,f=this.selection.selection;i.x=u.indexOf("x")==-1?i==f.first?0:this.plotWidth:n(r.relX,this);i.y=u.indexOf("y")==-1?i==f.first?0:this.plotHeight-1:t(r.relY,this)},drawSelection:function(){this.selection.fireSelectEvent("selecting");var n=this.selection.selection,t=this.octx,u=this.options,r=this.plotOffset,i=this.selection.prevSelection;if(!i||n.first.x!=i.first.x||n.first.y!=i.first.y||n.second.x!=i.second.x||n.second.y!=i.second.y){t.save();t.strokeStyle=this.processColor(u.selection.color,{opacity:.8});t.lineWidth=1;t.lineJoin="miter";t.fillStyle=this.processColor(u.selection.color,{opacity:.4});this.selection.prevSelection={first:{x:n.first.x,y:n.first.y},second:{x:n.second.x,y:n.second.y}};var f=Math.min(n.first.x,n.second.x),e=Math.min(n.first.y,n.second.y),o=Math.abs(n.second.x-n.first.x),s=Math.abs(n.second.y-n.first.y);t.fillRect(f+r.left+.5,e+r.top+.5,o,s);t.strokeRect(f+r.left+.5,e+r.top+.5,o,s);t.restore()}},updateSelection:function(){if(this.lastMousePos.pageX){if(this.selection.selecting=!0,this.multitouches)this.selection.setSelectionPos(this.selection.selection.first,this.getEventPosition(this.multitouches[0])),this.selection.setSelectionPos(this.selection.selection.second,this.getEventPosition(this.multitouches[1]));else{if(this.options.selection.pinchOnly)return;this.selection.setSelectionPos(this.selection.selection.second,this.lastMousePos)}this.selection.clearSelection();this.selection.selectionIsSane()&&this.selection.drawSelection()}},clearSelection:function(){if(this.selection.prevSelection){var n=this.selection.prevSelection,t=1,i=this.plotOffset,r=Math.min(n.first.x,n.second.x),u=Math.min(n.first.y,n.second.y),f=Math.abs(n.second.x-n.first.x),e=Math.abs(n.second.y-n.first.y);this.octx.clearRect(r+i.left-t+.5,u+i.top-t,f+2*t+.5,e+2*t+.5);this.selection.prevSelection=null}},selectionIsSane:function(){var n=this.selection.selection;return Math.abs(n.second.x-n.first.x)>=5||Math.abs(n.second.y-n.first.y)>=5}})}(),function(){var n=Flotr.DOM;Flotr.addPlugin("labels",{callbacks:{"flotr:afterdraw":function(){this.labels.draw()}},draw:function(){function s(n,u,e){var c=e?u.minorTicks:u.ticks,s=u.orientation===1,l=u.n===1,h;for(h={color:u.options.color||f.grid.color,angle:Flotr.toRad(u.options.labelsAngle),textBaseline:"middle"},i=0;i<c.length&&(e?u.options.showMinorLabels:u.options.showLabels);++i)(t=c[i],t.label+="",t.label&&t.label.length)&&(x=Math.cos(i*a+v)*o,y=Math.sin(i*a+v)*o,h.textAlign=s?Math.abs(x)<.1?"center":x<0?"right":"left":"left",Flotr.drawText(r,t.label,s?x:3,s?y:-(u.ticks[i].v/u.max)*(o-f.fontSize),h))}function h(n,u,e,o){function a(n){return n.options.showLabels&&n.used}function v(n,t,i,r){return n.plotOffset.left+(t?r:i?-f.grid.labelMargin:f.grid.labelMargin+n.plotWidth)}function y(n,t,i,r){return n.plotOffset.top+(t?f.grid.labelMargin:r)+(t&&i?n.plotHeight:0)}var c=u.orientation===1,l=u.n===1,s,h;for(s={color:u.options.color||f.grid.color,textAlign:e,textBaseline:o,angle:Flotr.toRad(u.options.labelsAngle)},s=Flotr.getBestTextAlign(s.angle,s),i=0;i<u.ticks.length&&a(u);++i)(t=u.ticks[i],t.label&&t.label.length)&&((h=u.d2p(t.v),h<0||h>(c?n.plotWidth:n.plotHeight))||(Flotr.drawText(r,t.label,v(n,c,l,h),y(n,c,l,h),s),c||l||(r.save(),r.strokeStyle=s.color,r.beginPath(),r.moveTo(n.plotOffset.left+n.plotWidth-8,n.plotOffset.top+u.d2p(t.v)),r.lineTo(n.plotOffset.left+n.plotWidth,n.plotOffset.top+u.d2p(t.v)),r.stroke(),r.restore())))}function c(n,u){var o=u.orientation===1,s=u.n===1,h="",c,a,e=n.plotOffset;if(o||s||(r.save(),r.strokeStyle=u.options.color||f.grid.color,r.beginPath()),u.options.showLabels&&(s?!0:u.used))for(i=0;i<u.ticks.length;++i)(t=u.ticks[i],!t.label||!t.label.length||(o?e.left:e.top)+u.d2p(t.v)<0||(o?e.left:e.top)+u.d2p(t.v)>(o?n.canvasWidth:n.canvasHeight))||(a=e.top+(o?(s?1:-1)*(n.plotHeight+f.grid.labelMargin):u.d2p(t.v)-u.maxLabel.height/2),c=o?e.left+u.d2p(t.v)-l/2:0,h="",i===0?h=" first":i===u.ticks.length-1&&(h=" last"),h+=o?" flotr-grid-label-x":" flotr-grid-label-y",p+=['<div style="position:absolute; text-align:'+(o?"center":"right")+"; ","top:"+a+"px; ",(!o&&!s?"right:":"left:")+c+"px; ","width:"+(o?l:(s?e.left:e.right)-f.grid.labelMargin)+"px; ",u.options.color?"color:"+u.options.color+"; ":" ",'" class="flotr-grid-label'+h+'">'+t.label+"<\/div>"].join(" "),o||s||(r.moveTo(e.left+n.plotWidth-8,e.top+u.d2p(t.v)),r.lineTo(e.left+n.plotWidth,e.top+u.d2p(t.v))))}for(var t,l,o,w,a,v,e,p="",b=0,f=this.options,r=this.ctx,u=this.axes,k={size:f.fontSize},i=0;i<u.x.ticks.length;++i)u.x.ticks[i].label&&++b;l=this.plotWidth/b;f.grid.circular&&(r.save(),r.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2),o=this.plotHeight*f.radar.radiusRatio/2+f.fontSize,w=this.axes.x.ticks.length,a=2*(Math.PI/w),v=-Math.PI/2,s(this,u.x,!1),s(this,u.x,!0),s(this,u.y,!1),s(this,u.y,!0),r.restore());!f.HtmlText&&this.textEnabled?(h(this,u.x,"center","top"),h(this,u.x2,"center","bottom"),h(this,u.y,"right","middle"),h(this,u.y2,"left","middle")):(u.x.options.showLabels||u.x2.options.showLabels||u.y.options.showLabels||u.y2.options.showLabels)&&!f.grid.circular&&(p="",c(this,u.x),c(this,u.x2),c(this,u.y),c(this,u.y2),r.stroke(),r.restore(),e=n.create("div"),n.setStyles(e,{fontSize:"smaller",color:f.grid.color}),e.className="flotr-labels",n.insert(this.el,e),n.insert(e,p))}})}(),function(){var n=Flotr.DOM,t=Flotr._;Flotr.addPlugin("legend",{options:{show:!0,noColumns:1,labelFormatter:function(n){return n},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:"nw",margin:5,backgroundColor:"#F0F0F0",backgroundOpacity:.85},callbacks:{"flotr:afterinit":function(){this.legend.insertLegend()}},insertLegend:function(){var rt,p,ut,g,ot,u,e,at;if(this.options.legend.show){var f=this.series,h=this.plotOffset,v=this.options,i=v.legend,w=[],ft=!1,o=this.ctx,st=t.filter(f,function(n){return n.label&&!n.hide}).length,c=i.position,s=i.margin,b=i.backgroundOpacity,r,y,nt;if(st){var tt=i.labelBoxWidth,k=i.labelBoxHeight,l=i.labelBoxMargin,it=h.left+s,d=h.top+s,et=0,ht={size:v.fontSize*1.1,color:v.grid.color};for(r=f.length-1;r>-1;--r)f[r].label&&!f[r].hide&&(y=i.labelFormatter(f[r].label),et=Math.max(et,this._text.measureText(y,ht).width));if(rt=Math.round(tt+l*3+et),p=Math.round(st*(l+k)+l),b||!0||(b=.1),v.HtmlText||!this.textEnabled||i.container){for(r=0;r<f.length;++r)if(f[r].label&&!f[r].hide){r%i.noColumns==0&&(w.push(ft?"<\/tr><tr>":"<tr>"),ft=!0);var a=f[r],ct=i.labelBoxWidth,lt=i.labelBoxHeight;y=i.labelFormatter(a.label);nt="background-color:"+(a.bars&&a.bars.show&&a.bars.fillColor&&a.bars.fill?a.bars.fillColor:a.color)+";";w.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',i.labelBoxBorderColor,';padding:1px">','<div style="width:',ct-1,"px;height:",lt-1,"px;border:1px solid ",f[r].color,'">','<div style="width:',ct,"px;height:",lt,"px;",nt,'"><\/div>',"<\/div>","<\/div>","<\/td>",'<td class="flotr-legend-label">',y,"<\/td>")}if(ft&&w.push("<\/tr>"),w.length>0)if(ot='<table style="font-size:smaller;color:'+v.grid.color+'">'+w.join("")+"<\/table>",i.container)n.empty(i.container),n.insert(i.container,ot);else{if(u={position:"absolute",zIndex:"2",border:"1px solid "+i.labelBoxBorderColor},c.charAt(0)=="n"?(u.top=s+h.top+"px",u.bottom="auto"):c.charAt(0)=="c"?(u.top=s+(this.plotHeight-p)/2+"px",u.bottom="auto"):c.charAt(0)=="s"&&(u.bottom=s+h.bottom+"px",u.top="auto"),c.charAt(1)=="e"?(u.right=s+h.right+"px",u.left="auto"):c.charAt(1)=="w"&&(u.left=s+h.left+"px",u.right="auto"),e=n.create("div"),e.className="flotr-legend",n.setStyles(e,u),n.insert(e,ot),n.insert(this.el,e),!b)return;at=i.backgroundColor||v.grid.backgroundColor||"#ffffff";t.extend(u,n.size(e),{backgroundColor:at,zIndex:"",border:""});u.width+="px";u.height+="px";e=n.create("div");e.className="flotr-legend-bg";n.setStyles(e,u);n.opacity(e,b);n.insert(e," ");n.insert(this.el,e)}}else for(c.charAt(0)=="s"&&(d=h.top+this.plotHeight-(s+p)),c.charAt(0)=="c"&&(d=h.top+this.plotHeight/2-(s+p/2)),c.charAt(1)=="e"&&(it=h.left+this.plotWidth-(s+rt)),nt=this.processColor(i.backgroundColor,{opacity:b}),o.fillStyle=nt,o.fillRect(it,d,rt,p),o.strokeStyle=i.labelBoxBorderColor,o.strokeRect(Flotr.toPixel(it),Flotr.toPixel(d),rt,p),ut=it+l,g=d+l,r=0;r<f.length;r++)f[r].label&&!f[r].hide&&(y=i.labelFormatter(f[r].label),o.fillStyle=f[r].color,o.fillRect(ut,g,tt-1,k-1),o.strokeStyle=i.labelBoxBorderColor,o.lineWidth=1,o.strokeRect(Math.ceil(ut)-1.5,Math.ceil(g)-1.5,tt+2,k+2),Flotr.drawText(o,y,ut+tt+l,g+k,ht),g+=k+l)}}}})}(),function(){function i(n){if(this.options.spreadsheet.tickFormatter)return this.options.spreadsheet.tickFormatter(n);var i=t.find(this.axes.x.ticks,function(t){return t.v==n});return i?i.label:n}var n=Flotr.DOM,t=Flotr._;Flotr.addPlugin("spreadsheet",{options:{show:!1,tabGraphLabel:"Graph",tabDataLabel:"Data",toolbarDownload:"Download CSV",toolbarSelectAll:"Select all",csvFileSeparator:",",decimalSeparator:".",tickFormatter:null,initialTab:"graph"},callbacks:{"flotr:afterconstruct":function(){if(this.options.spreadsheet.show){var t=this.spreadsheet,i=n.node('<div class="flotr-tabs-group" style="position:absolute;left:0px;width:'+this.canvasWidth+'px"><\/div>'),u=n.node('<div style="float:left" class="flotr-tab selected">'+this.options.spreadsheet.tabGraphLabel+"<\/div>"),r=n.node('<div style="float:left" class="flotr-tab">'+this.options.spreadsheet.tabDataLabel+"<\/div>"),f;t.tabsContainer=i;t.tabs={graph:u,data:r};n.insert(i,u);n.insert(i,r);n.insert(this.el,i);f=n.size(r).height+2;this.plotOffset.bottom+=f;n.setStyles(i,{top:this.canvasHeight-f+"px"});this.observe(u,"click",function(){t.showTab("graph")}).observe(r,"click",function(){t.showTab("data")});this.options.spreadsheet.initialTab!=="graph"&&t.showTab(this.options.spreadsheet.initialTab)}}},loadDataGrid:function(){if(this.seriesData)return this.seriesData;var i=this.series,n={};return t.each(i,function(i,r){t.each(i.data,function(t){var u=t[0],f=t[1],e=n[u],i;e?e[r+1]=f:(i=[],i[0]=u,i[r+1]=f,n[u]=i)})}),this.seriesData=t.sortBy(n,function(n,t){return parseInt(t,10)}),this.seriesData},constructDataGrid:function(){var e,l,u;if(this.spreadsheet.datagrid)return this.spreadsheet.datagrid;var h=this.series,a=this.spreadsheet.loadDataGrid(),c=["<colgroup><col />"],o,s,f,r=['<table class="flotr-datagrid"><tr class="first-row">'];return r.push("<th>&nbsp;<\/th>"),t.each(h,function(n,t){r.push('<th scope="col">'+(n.label||String.fromCharCode(65+t))+"<\/th>");c.push("<col />")}),r.push("<\/tr>"),t.each(a,function(n){r.push("<tr>");t.times(h.length+1,function(u){var f="td",s=n[u],e=t.isUndefined(s)?"":Math.round(s*1e5)/1e5,o;u===0&&(f="th",o=i.call(this,e),o&&(e=o));r.push("<"+f+(f=="th"?' scope="row"':"")+">"+e+"<\/"+f+">")},this);r.push("<\/tr>")},this),c.push("<\/colgroup>"),f=n.node(r.join("")),o=n.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarDownload+"<\/button>"),s=n.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarSelectAll+"<\/button>"),this.observe(o,"click",t.bind(this.spreadsheet.downloadCSV,this)).observe(s,"click",t.bind(this.spreadsheet.selectAllData,this)),e=n.node('<div class="flotr-datagrid-toolbar"><\/div>'),n.insert(e,o),n.insert(e,s),l=this.canvasHeight-n.size(this.spreadsheet.tabsContainer).height-2,u=n.node('<div class="flotr-datagrid-container" style="position:absolute;left:0px;top:0px;width:'+this.canvasWidth+"px;height:"+l+'px;overflow:auto;z-index:10"><\/div>'),n.insert(u,e),n.insert(u,f),n.insert(this.el,u),this.spreadsheet.datagrid=f,this.spreadsheet.container=u,f},showTab:function(t){if(this.spreadsheet.activeTab!==t){switch(t){case"graph":n.hide(this.spreadsheet.container);n.removeClass(this.spreadsheet.tabs.data,"selected");n.addClass(this.spreadsheet.tabs.graph,"selected");break;case"data":this.spreadsheet.datagrid||this.spreadsheet.constructDataGrid();n.show(this.spreadsheet.container);n.addClass(this.spreadsheet.tabs.data,"selected");n.removeClass(this.spreadsheet.tabs.graph,"selected");break;default:throw"Illegal tab name: "+t;}this.spreadsheet.activeTab=t}},selectAllData:function(){if(this.spreadsheet.tabs){var t,n,i,u,r=this.spreadsheet.constructDataGrid();return this.spreadsheet.showTab("data"),setTimeout(function(){(i=r.ownerDocument)&&(u=i.defaultView)&&u.getSelection&&i.createRange&&(t=window.getSelection())&&t.removeAllRanges?(n=i.createRange(),n.selectNode(r),t.removeAllRanges(),t.addRange(n)):document.body&&document.body.createTextRange&&(n=document.body.createTextRange())&&(n.moveToElementText(r),n.select())},0),!0}return!1},downloadCSV:function(){var n="",f=this.series,r=this.options,e=this.spreadsheet.loadDataGrid(),u=encodeURIComponent(r.spreadsheet.csvFileSeparator);if(r.spreadsheet.decimalSeparator===r.spreadsheet.csvFileSeparator)throw"The decimal separator is the same as the column separator ("+r.spreadsheet.decimalSeparator+")";t.each(f,function(t,i){n+=u+'"'+(t.label||String.fromCharCode(65+i)).replace(/\"/g,'\\"')+'"'});n+="%0D%0A";n+=t.reduce(e,function(n,t){var e=i.call(this,t[0])||"",f;return e='"'+(e+"").replace(/\"/g,'\\"')+'"',f=t.slice(1).join(u),r.spreadsheet.decimalSeparator!=="."&&(f=f.replace(/\./g,r.spreadsheet.decimalSeparator)),n+e+u+f+"%0D%0A"},"",this);Flotr.isIE&&Flotr.isIE<9?(n=n.replace(new RegExp(u,"g"),decodeURIComponent(u)).replace(/%0A/g,"\n").replace(/%0D/g,"\r"),window.open().document.write(n)):window.open("data:text/csv,"+n)}})}(),function(){var n=Flotr.DOM;Flotr.addPlugin("titles",{callbacks:{"flotr:afterdraw":function(){this.titles.drawTitles()}},drawTitles:function(){var u,r=this.options,e=r.grid.labelMargin,f=this.ctx,t=this.axes,i,o;!r.HtmlText&&this.textEnabled?(i={size:r.fontSize,color:r.grid.color,textAlign:"center"},r.subtitle&&Flotr.drawText(f,r.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,i),i.weight=1.5,i.size*=1.5,r.title&&Flotr.drawText(f,r.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,i),i.weight=1.8,i.size*=.8,t.x.options.title&&t.x.used&&(i.textAlign=t.x.options.titleAlign||"center",i.textBaseline="top",i.angle=Flotr.toRad(t.x.options.titleAngle),i=Flotr.getBestTextAlign(i.angle,i),Flotr.drawText(f,t.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+t.x.maxLabel.height+this.plotHeight+2*e,i)),t.x2.options.title&&t.x2.used&&(i.textAlign=t.x2.options.titleAlign||"center",i.textBaseline="bottom",i.angle=Flotr.toRad(t.x2.options.titleAngle),i=Flotr.getBestTextAlign(i.angle,i),Flotr.drawText(f,t.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-t.x2.maxLabel.height-2*e,i)),t.y.options.title&&t.y.used&&(i.textAlign=t.y.options.titleAlign||"right",i.textBaseline="middle",i.angle=Flotr.toRad(t.y.options.titleAngle),i=Flotr.getBestTextAlign(i.angle,i),Flotr.drawText(f,t.y.options.title,this.plotOffset.left-t.y.maxLabel.width-2*e,this.plotOffset.top+this.plotHeight/2,i)),t.y2.options.title&&t.y2.used&&(i.textAlign=t.y2.options.titleAlign||"left",i.textBaseline="middle",i.angle=Flotr.toRad(t.y2.options.titleAngle),i=Flotr.getBestTextAlign(i.angle,i),Flotr.drawText(f,t.y2.options.title,this.plotOffset.left+this.plotWidth+t.y2.maxLabel.width+2*e,this.plotOffset.top+this.plotHeight/2,i))):(u=[],r.title&&u.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;font-size:1em;font-weight:bold;text-align:center;width:",this.plotWidth,'px;" class="flotr-title">',r.title,"<\/div>"),r.subtitle&&u.push('<div style="position:absolute;top:',this.titleHeight,"px;left:",this.plotOffset.left,"px;font-size:smaller;text-align:center;width:",this.plotWidth,'px;" class="flotr-subtitle">',r.subtitle,"<\/div>"),u.push("<\/div>"),u.push('<div class="flotr-axis-title" style="font-weight:bold;">'),t.x.options.title&&t.x.used&&u.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight+r.grid.labelMargin+t.x.titleSize.height,"px;left:",this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",t.x.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x1">',t.x.options.title,"<\/div>"),t.x2.options.title&&t.x2.used&&u.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",t.x2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x2">',t.x2.options.title,"<\/div>"),t.y.options.title&&t.y.used&&u.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-t.y.titleSize.height/2,"px;left:0;text-align:",t.y.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y1">',t.y.options.title,"<\/div>"),t.y2.options.title&&t.y2.used&&u.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-t.y.titleSize.height/2,"px;right:0;text-align:",t.y2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y2">',t.y2.options.title,"<\/div>"),u=u.join(""),o=n.create("div"),n.setStyles({color:r.grid.color}),o.className="flotr-titles",n.insert(this.el,o),n.insert(o,u))}})}();
//# sourceMappingURL=flotr2.min.js.map
