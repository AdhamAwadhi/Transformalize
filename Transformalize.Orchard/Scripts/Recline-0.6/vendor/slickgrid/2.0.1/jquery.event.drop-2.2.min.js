/*! 
 * jquery.event.drop - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
(function(n){n.fn.drop=function(t,i,r){var u=typeof t=="string"?t:"",f=n.isFunction(t)?t:n.isFunction(i)?i:null;return u.indexOf("drop")!==0&&(u="drop"+u),r=(t==f?i:r)||{},f?this.bind(u,r,f):this.trigger(u)};n.drop=function(i){i=i||{};t.multi=i.multi===!0?Infinity:i.multi===!1?1:isNaN(i.multi)?t.multi:i.multi;t.delay=i.delay||t.delay;t.tolerance=n.isFunction(i.tolerance)?i.tolerance:i.tolerance===null?null:t.tolerance;t.mode=i.mode||t.mode||"intersect"};var r=n.event,i=r.special,t=n.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(){var i=n.data(this,t.datakey);i.related+=1},remove:function(){n.data(this,t.datakey).related-=1},setup:function(){if(!n.data(this,t.datakey))n.data(this,t.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),t.targets.push(this)},teardown:function(){var r=n.data(this,t.datakey)||{},i;r.related||(n.removeData(this,t.datakey),i=this,t.targets=n.grep(t.targets,function(n){return n!==i}))},handler:function(r,u){var f;if(u)switch(r.type){case"mousedown":case"touchstart":f=n(t.targets);typeof u.drop=="string"&&(f=f.filter(u.drop));f.each(function(){var i=n.data(this,t.datakey);i.active=[];i.anyactive=0;i.winner=0});u.droppable=f;i.drag.hijack(r,"dropinit",u);break;case"mousemove":case"touchmove":t.event=r;t.timer||t.tolerate(u);break;case"mouseup":case"touchend":t.timer=clearTimeout(t.timer);u.propagates&&(i.drag.hijack(r,"drop",u),i.drag.hijack(r,"dropend",u))}},locate:function(i,r){var u=n.data(i,t.datakey),e=n(i),f=e.offset()||{},o=e.outerHeight(),s=e.outerWidth(),h={elem:i,width:s,height:o,top:f.top,left:f.left,right:f.left+s,bottom:f.top+o};return u&&(u.location=h,u.index=r,u.elem=i),h},contains:function(n,t){return(t[0]||t.left)>=n.left&&(t[0]||t.right)<=n.right&&(t[1]||t.top)>=n.top&&(t[1]||t.bottom)<=n.bottom},modes:{intersect:function(n,t,i){return this.contains(i,[n.pageX,n.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(n,t,i){return Math.max(0,Math.min(i.bottom,t.bottom)-Math.max(i.top,t.top))*Math.max(0,Math.min(i.right,t.right)-Math.max(i.left,t.left))},fit:function(n,t,i){return this.contains(i,t)?1:0},middle:function(n,t,i){return this.contains(i,[t.left+t.width*.5,t.top+t.height*.5])?1:0}},sort:function(n,t){return t.winner-n.winner||n.index-t.index},tolerate:function(r){var o,s,v,u,h,c,y,f=0,e,p=r.interactions.length,l=[t.event.pageX,t.event.pageY],a=t.tolerance||t.modes[t.mode];do if(e=r.interactions[f]){if(!e)return;e.drop=[];h=[];c=e.droppable.length;a&&(v=t.locate(e.proxy));o=0;do if(y=e.droppable[o]){if(u=n.data(y,t.datakey),s=u.location,!s)continue;u.winner=a?a.call(t,t.event,v,s):t.contains(s,l)?1:0;h.push(u)}while(++o<c);h.sort(t.sort);o=0;do(u=h[o])&&(u.winner&&e.drop.length<t.multi?(u.active[f]||u.anyactive||(i.drag.hijack(t.event,"dropstart",r,f,u.elem)[0]!==!1?(u.active[f]=1,u.anyactive+=1):u.winner=0),u.winner&&e.drop.push(u.elem)):u.active[f]&&u.anyactive==1&&(i.drag.hijack(t.event,"dropend",r,f,u.elem),u.active[f]=0,u.anyactive-=1));while(++o<c)}while(++f<p);t.last&&l[0]==t.last.pageX&&l[1]==t.last.pageY?delete t.timer:t.timer=setTimeout(function(){t.tolerate(r)},t.delay);t.last=t.event}};i.dropinit=i.dropstart=i.dropend=t})(jQuery);
//# sourceMappingURL=jquery.event.drop-2.2.min.js.map
