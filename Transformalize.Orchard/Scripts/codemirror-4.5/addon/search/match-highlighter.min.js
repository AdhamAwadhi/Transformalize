(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";function o(n){typeof n=="object"&&(this.minChars=n.minChars,this.style=n.style,this.showToken=n.showToken,this.delay=n.delay);this.style==null&&(this.style=f);this.minChars==null&&(this.minChars=u);this.delay==null&&(this.delay=e);this.overlay=this.timeout=null}function t(n){var t=n.state.matchHighlighter;clearTimeout(t.timeout);t.timeout=setTimeout(function(){i(n)},t.delay)}function i(n){n.operation(function(){var t=n.state.matchHighlighter,o,s,h;if(t.overlay&&(n.removeOverlay(t.overlay),t.overlay=null),!n.somethingSelected()&&t.showToken){for(var e=t.showToken===!0?/[\w$]/:t.showToken,c=n.getCursor(),f=n.getLine(c.line),i=c.ch,u=i;i&&e.test(f.charAt(i-1));)--i;while(u<f.length&&e.test(f.charAt(u)))++u;i<u&&n.addOverlay(t.overlay=r(f.slice(i,u),e,t.style));return}(o=n.getCursor("from"),s=n.getCursor("to"),o.line==s.line)&&(h=n.getRange(o,s).replace(/^\s+|\s+$/g,""),h.length>=t.minChars&&n.addOverlay(t.overlay=r(h,!1,t.style)))})}function s(n,t){return(!n.start||!t.test(n.string.charAt(n.start-1)))&&(n.pos==n.string.length||!t.test(n.string.charAt(n.pos)))}function r(n,t,i){return{token:function(r){if(r.match(n)&&(!t||s(r,t)))return i;r.next();r.skipTo(n.charAt(0))||r.skipToEnd()}}}var u=2,f="matchhighlight",e=100;n.defineOption("highlightSelectionMatches",!1,function(r,u,f){if(f&&f!=n.Init){var e=r.state.matchHighlighter.overlay;e&&r.removeOverlay(e);clearTimeout(r.state.matchHighlighter.timeout);r.state.matchHighlighter=null;r.off("cursorActivity",t)}if(u){r.state.matchHighlighter=new o(u);i(r);r.on("cursorActivity",t)}})});
//# sourceMappingURL=match-highlighter.min.js.map
