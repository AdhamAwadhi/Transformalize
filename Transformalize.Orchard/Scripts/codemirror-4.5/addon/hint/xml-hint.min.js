(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";function i(i,r){var l=r&&r.schemaInfo,d=r&&r.quoteChar||'"',o,p,rt,c,k,ut,a,st,ft,s,et;if(l){var h=i.getCursor(),u=i.getTokenAt(h),g=n.innerMode(i.getMode(),u.state);if(g.mode.name=="xml"){var v=[],b=!1,f,nt=/\btag\b/.test(u.type),ht=nt&&/^\w/.test(u.string),ot;if(ht?(k=i.getLine(h.line).slice(Math.max(0,u.start-2),u.start),o=/<\/$/.test(k)?"close":/<$/.test(k)?"open":null,o&&(ot=u.start-(o=="close"?2:1))):nt&&u.string=="<"?o="open":nt&&u.string=="<\/"&&(o="close"),(nt||g.state.tagName)&&!o){var tt=l[g.state.tagName],e=tt&&tt.attrs,w=l["!attrs"];if(!e&&!w)return;if(e){if(w){rt={};for(c in w)w.hasOwnProperty(c)&&(rt[c]=w[c]);for(c in e)e.hasOwnProperty(c)&&(rt[c]=e[c]);e=rt}}else e=w;if(u.type=="string"||u.string=="="){if(k=i.getRange(t(h.line,Math.max(0,h.ch-60)),t(h.line,u.type=="string"?u.start:u.end)),ut=k.match(/([^\s\u00a0=<>\"\']+)=$/),!ut||!e.hasOwnProperty(ut[1])||!(a=e[ut[1]]))return;for(typeof a=="function"&&(a=a.call(this,i)),u.type=="string"&&(f=u.string,st=0,/['"]/.test(u.string.charAt(0))&&(d=u.string.charAt(0),f=u.string.slice(1),st++),ft=u.string.length,/['"]/.test(u.string.charAt(ft-1))&&(d=u.string.charAt(ft-1),f=u.string.substr(st,ft-2)),b=!0),s=0;s<a.length;++s)f&&a[s].lastIndexOf(f,0)!=0||v.push(d+a[s]+d)}else{u.type=="attribute"&&(f=u.string,b=!0);for(et in e)e.hasOwnProperty(et)&&(!f||et.lastIndexOf(f,0)==0)&&v.push(et)}}else{ht&&(f=u.string);b=o;var y=g.state.context,tt=y&&l[y.tagName],it=y?tt&&tt.children:l["!top"];if(it&&o!="close")for(s=0;s<it.length;++s)f&&it[s].lastIndexOf(f,0)!=0||v.push("<"+it[s]);else if(o!="close")for(p in l)l.hasOwnProperty(p)&&p!="!top"&&p!="!attrs"&&(!f||p.lastIndexOf(f,0)==0)&&v.push("<"+p);y&&(!f||o=="close"&&y.tagName.lastIndexOf(f,0)==0)&&v.push("<\/"+y.tagName+">")}return{list:v,from:b?t(h.line,ot==null?u.start:ot):h,to:b?t(h.line,u.end):h}}}}var t=n.Pos;n.registerHelper("hint","xml",i)});
//# sourceMappingURL=xml-hint.min.js.map
