(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";function i(i,r){var l=r&&r.schemaInfo,g=r&&r.quoteChar||'"',e,u,nt,b,s,p,ut,c,d,ft,a,ht,et,h,ot;if(l&&(e=i.getCursor(),u=i.getTokenAt(e),/^<\/?$/.test(u.string)&&u.end==e.ch&&(nt=i.getTokenAt(t(e.line,e.ch+1)),nt.start==e.ch&&/\btag\b/.test(nt.type)&&(u=nt)),b=n.innerMode(i.getMode(),u.state),b.mode.name=="xml")){var v=[],k=!1,f,tt=/\btag\b/.test(u.type)&&!/>$/.test(u.string),ct=tt&&/^\w/.test(u.string),st;if(ct?(d=i.getLine(e.line).slice(Math.max(0,u.start-2),u.start),s=/<\/$/.test(d)?"close":/<$/.test(d)?"open":null,s&&(st=u.start-(s=="close"?2:1))):tt&&u.string=="<"?s="open":tt&&u.string=="<\/"&&(s="close"),(tt||b.state.tagName)&&!s){var it=l[b.state.tagName],o=it&&it.attrs,w=l["!attrs"];if(!o&&!w)return;if(o){if(w){ut={};for(c in w)w.hasOwnProperty(c)&&(ut[c]=w[c]);for(c in o)o.hasOwnProperty(c)&&(ut[c]=o[c]);o=ut}}else o=w;if(u.type=="string"||u.string=="="){if(d=i.getRange(t(e.line,Math.max(0,e.ch-60)),t(e.line,u.type=="string"?u.start:u.end)),ft=d.match(/([^\s\u00a0=<>\"\']+)=$/),!ft||!o.hasOwnProperty(ft[1])||!(a=o[ft[1]]))return;for(typeof a=="function"&&(a=a.call(this,i)),u.type=="string"&&(f=u.string,ht=0,/['"]/.test(u.string.charAt(0))&&(g=u.string.charAt(0),f=u.string.slice(1),ht++),et=u.string.length,/['"]/.test(u.string.charAt(et-1))&&(g=u.string.charAt(et-1),f=u.string.substr(ht,et-2)),k=!0),h=0;h<a.length;++h)f&&a[h].lastIndexOf(f,0)!=0||v.push(g+a[h]+g)}else{u.type=="attribute"&&(f=u.string,k=!0);for(ot in o)o.hasOwnProperty(ot)&&(!f||ot.lastIndexOf(f,0)==0)&&v.push(ot)}}else{ct&&(f=u.string);k=s;var y=b.state.context,it=y&&l[y.tagName],rt=y?it&&it.children:l["!top"];if(rt&&s!="close")for(h=0;h<rt.length;++h)f&&rt[h].lastIndexOf(f,0)!=0||v.push("<"+rt[h]);else if(s!="close")for(p in l)l.hasOwnProperty(p)&&p!="!top"&&p!="!attrs"&&(!f||p.lastIndexOf(f,0)==0)&&v.push("<"+p);y&&(!f||s=="close"&&y.tagName.lastIndexOf(f,0)==0)&&v.push("<\/"+y.tagName+">")}return{list:v,from:k?t(e.line,st==null?u.start:st):e,to:k?t(e.line,u.end):e}}}var t=n.Pos;n.registerHelper("hint","xml",i)});
//# sourceMappingURL=xml-hint.min.js.map
